<!DOCTYPE html>
<html dir="rtl" lang="ar">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title data-i18n="app_title">ูุธุงู ูุดู ุงูุญุถูุฑ - ูููุฉ ุงูุชูุฑูุถ</title>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0ea5e9">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" href="icon.png" type="image/png">

    <link
        href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&family=Outfit:wght@500;700;900&family=Reem+Kufi:wght@700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="style.css">

    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <script src="https://unpkg.com/read-excel-file@5.x/bundle/read-excel-file.min.js"></script>
    <script defer src="./face-api.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <!-- ููุชุจุฉ ุงูุฑุณูู ุงูุจูุงููุฉ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- ููุชุจุฉ ุชุตุฏูุฑ ุงูุตูุฑ -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <!-- ููุชุจุฉ ุชุตุฏูุฑ PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="notifications.css">

</head>

<body>
    <!-- ุนูุตุฑ ุงูุณุญุจ ููุชุญุฏูุซ ุงูููุฏุฑู -->
    <div id="pullToRefresh" class="ptr-container">
        <div class="ptr-box">
            <i id="ptrIcon" class="fa-solid fa-arrow-down"></i>
        </div>
    </div>
    <div id="topToast"></div>
    <div id="verificationSuccessModal" class="modal-overlay" style="z-index: 999999;">
        <div class="modal-box">
            <i class="fa-solid fa-check-circle success-icon-large"></i>
            <div class="modal-title" style="color: #10b981; font-size: 16px;" data-i18n="verified_title">ุชู ุงูุชุญูู</div>
            <div class="modal-text" style="font-weight:bold; color:#64748b; font-size: 13px;"
                data-i18n="processing_text">ุฌุงุฑู ุงููุญุต...</div>
            <div style="margin-top:15px;"><i class="fa-solid fa-circle-notch fa-spin" style="color:var(--primary);"></i>
            </div>
        </div>
    </div>

    <div id="bypassModal" class="modal-overlay" style="z-index: 999999;">
        <div class="modal-box">
            <i class="fa-solid fa-user-check bypass-icon"></i>
            <div class="modal-title" style="color: #10b981;" data-i18n="bypass_title">ุชู ุชุฌุงูุฒ ุงูุชุญูู</div>
            <div class="modal-text">
                <span data-i18n="bypass_desc">ุฃูุช ุงูุขู ูู ูุถุน ุงููุณุคูู ุงููุฏูู.</span>
                <br>
                <small style="color:#ef4444;" data-i18n="bypass_small">ุชู ุชุฎุทู ุจุตูุฉ ุงููุฌู ูุงููููุน ุงูุฌุบุฑุงูู</small>
            </div>
        </div>
    </div>

    <div id="duplicateModal" class="modal-overlay" style="z-index: 999999;">
        <div class="modal-box">
            <i class="fa-solid fa-triangle-exclamation" style="font-size:45px; color:#f59e0b; margin-bottom:15px;"></i>
            <div class="modal-title" style="color: #f59e0b;">ุชูุจูู</div>
            <div class="modal-text">ููุฏ ููุช ุจุชุณุฌูู ุงูุญุถูุฑ ูุณุจูุงู ูู ูุฐุง ุงูููุฑุฑ ุงูููู.</div>
            <button onclick="document.getElementById('duplicateModal').style.display='none'"
                class="modal-btn btn-confirm" style="background:#334155;">ุญุณูุงู</button>
        </div>
    </div>

    <div id="desktop-blocker">
        <i class="fa-solid fa-mobile-screen-button" style="font-size:50px; margin-bottom:20px;"></i>
        <h2 style="margin-bottom:10px">ุนุฐุฑุงูุ ูุตูู ุบูุฑ ูุตุฑุญ ุจู</h2>
        <p>ุงููุธุงู ูุชุงุญ ููุท ูู ููุงุชู Android ู iPhone ุงูุฐููุฉ.</p>
    </div>

    <div id="locationForceModal" class="modal-overlay" style="display:none;">
        <div class="modal-box">
            <div style="position:absolute; top:15px; left:15px;">
                <button onclick="document.getElementById('locationForceModal').style.display='none'"
                    style="background:none; border:none; color:#94a3b8; font-size:20px; cursor:pointer;"><i
                        class="fa-solid fa-xmark"></i></button>
            </div>
            <i class="fa-solid fa-location-dot fa-bounce"></i>
            <div class="modal-title">ุชูุนูู ุงููููุน</div>
            <div class="modal-text">ูุฑุฌู ุชูุนูู ุฎุฏูุฉ GPS ูููุชุงุจุนุฉ.</div>
        </div>
    </div>

    <div class="bg-image"></div>
    <audio id="successSound" src=""></audio>
    <audio id="clickSound" src=""></audio>
    <audio id="beepSound" src=""></audio>

    <div id="customLogoutModal" class="modal-overlay">
        <div class="modal-box">
            <i class="fa-solid fa-arrow-right-from-bracket"
                style="font-size: 40px; color: #ef4444; margin-bottom: 15px;"></i>
            <div class="modal-title">ุชุณุฌูู ุงูุฎุฑูุฌ</div>
            <div class="modal-text">ูู ุชุฑูุฏ ุงูุฎุฑูุฌ ูู ูุถุน ุงููุณุคููุ</div>
            <div class="modal-actions">
                <button onclick="performLogout()" class="modal-btn btn-confirm">ูุนู</button>
                <button onclick="closeLogoutModal()" class="modal-btn btn-cancel">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <div id="banModal" class="modal-overlay" style="z-index: 100000;">
        <div class="modal-box" style="border: 2px solid #ef4444;">
            <i class="fa-solid fa-ban" style="font-size: 50px; color: #ef4444; margin-bottom: 15px;"></i>
            <div class="modal-title" style="color: #ef4444;">ุชู ุญุธุฑู</div>
            <div class="modal-text" style="font-weight: bold;">ููุฏ ุงุณุชููุฐุช ูุญุงููุงุชู (3 ูุฑุงุช) ุฃู ุชู ุงูุชุดุงู ุชูุฑุงุฑ ูู
                ุงูุจูุงูุงุช.</div>
            <button onclick="location.reload()" class="modal-btn btn-confirm" style="margin-top: 10px;">ุฅุบูุงู</button>
        </div>
    </div>

    <div id="adminSuccessModal" class="modal-overlay" style="z-index: 99999;">
        <div class="modal-box">
            <i class="fa-solid fa-user-shield admin-success-icon"></i>
            <div class="modal-title" style="color: #10b981;">ุชู ุงูุชูุนูู ุจูุฌุงุญ</div>
            <div class="modal-text">ุฃููุงู ุจู ูู ููุญุฉ ุชุญูู ุงููุณุคูู.</div>
        </div>
    </div>

    <div id="modernConfirmModal" class="modal-overlay" style="z-index: 210000000;">
        <div class="modal-box confirm-box-style">
            <div class="confirm-icon-animate">
                <i class="fa-solid fa-trash-can"></i>
            </div>
            <div class="modal-title" id="modernConfirmTitle">ุชุฃููุฏ ุงูุญุฐู</div>
            <div class="modal-text" id="modernConfirmText">ูู ุฃูุช ูุชุฃูุฏ ูู ุฅุชูุงู ูุฐู ุงูุนูููุฉุ</div>
            <div class="modal-actions">
                <button id="btnConfirmYes" class="modal-btn btn-confirm-modern">ูุนูุ ุงุญุฐู</button>
                <button onclick="closeModernConfirm()" class="modal-btn btn-cancel-modern">ุชุฑุงุฌุน</button>
            </div>
        </div>
    </div>

    <div id="dataEntryModal" class="modal-overlay">
        <div class="modal-box">
            <div class="report-modal-header">
                <div class="modal-title" style="margin:0; font-size:16px;" data-i18n="data_entry_menu">ูุงุฆูุฉ ุฅุฏุฎุงู
                    ุงูุจูุงูุงุช</div>
                <button onclick="document.getElementById('dataEntryModal').style.display='none'"
                    class="btn-close-stylish" style="width:auto; padding:5px 15px;" data-i18n="close_btn">ุฅุบูุงู</button>
            </div>
            <div class="report-views-container">
                <div style="padding:15px; display:flex; flex-direction:column; gap:10px;">

                    <button class="data-entry-btn btn-manage-db" onclick="openManageStudentsModal()">
                        <i class="fa-solid fa-users-gear"></i>
                        <span>Manage Student DB</span>
                    </button>
                    <button class="data-entry-btn btn-archive" onclick="openArchiveModal()">
                        <i class="fa-solid fa-box-archive"></i>
                        <span>Attendance Archive</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="reportModal" class="modal-overlay">
        <div class="modal-box">
            <div class="report-modal-header">
                <div style="display:flex; flex-direction:column; align-items:flex-start;">
                    <div class="modal-title" style="margin:0; font-size:16px;" data-i18n="attendance_log_title">ุณุฌู
                        ุงูุญุถูุฑ</div>
                    <div id="reportDateDisplay" class="en-font"
                        style="font-size:12px; color:#94a3b8; font-weight:bold;">--</div>
                </div>
                <button onclick="clearAllReport()" class="btn-icon-danger">
                    <i class="fa-solid fa-trash-can"></i>
                </button>
            </div>

            <div class="report-views-container">
                <div id="viewSubjects" class="report-view slide-in">
                    <div id="subjectsContainer"></div>
                </div>

                <div id="viewStudents" class="report-view">
                    <div class="students-list-header">
                        <button onclick="showSubjectsView()" class="btn-back-report">
                            <i class="fa-solid fa-arrow-right"></i>
                        </button>
                        <div style="display:flex; flex-direction:column; text-align:right;">
                            <span id="currentSubjectTitle"
                                style="font-weight:800; font-size:14px; color:var(--primary-dark)">--</span>
                        </div>
                        <button onclick="openReportModal()" class="btn-back-report" style="margin-right:auto;">
                            <i class="fa-solid fa-rotate-right"></i>
                        </button>
                    </div>

                    <div class="search-box-wrapper">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" id="studentSearchInput" data-i18n-placeholder="search_student_placeholder"
                            placeholder="ุงุจุญุซ ุจุงูุงุณู ุฃู ุงูููุฏ..." onkeyup="filterStudents()">
                    </div>

                    <div id="studentsContainer"></div>
                </div>
            </div>

            <div class="report-modal-footer">
                <button id="btnRefreshReport" onclick="openReportModal()" class="btn-refresh-list">
                    <span data-i18n="refresh_btn">ุชุญุฏูุซ</span> <i class="fa-solid fa-rotate"></i>
                </button>
                <button onclick="closeReportModal()" class="btn-close-stylish" style="margin-top:10px;"
                    data-i18n="close_btn">
                    ุฅุบูุงู
                </button>
            </div>
        </div>
    </div>

    <div id="examModal" class="modal-overlay">
        <div class="modal-box">
            <div class="exam-loader"></div>
            <div class="modal-title" style="color: #7c3aed;" data-i18n="preparing_title">ุฌุงุฑู ุงูุฅุนุฏุงุฏ</div>
            <div class="modal-text" data-i18n="exam_system_notice">ูุชู ุชุฌููุฒ ูุธุงู ุงูุงูุชุญุงูุงุช ุญุงููุงู...</div>
            <button onclick="closeExamModal()" class="modal-btn btn-cancel" data-i18n="close_btn">ุฅุบูุงู</button>
        </div>
    </div>

    <div id="cameraErrorModal" class="modal-overlay">
        <div class="modal-box">
            <i class="fa-solid fa-camera-slash" style="font-size: 45px; color: #ef4444; margin-bottom: 15px;"></i>
            <div class="modal-title" style="color: #ef4444;" data-i18n="camera_error_title">ุฎุทุฃ ูู ุงููุงููุฑุง</div>
            <div class="modal-text" id="cameraErrorMsg" data-i18n="camera_error_msg">ูุฑุฌู ุงูุชุฃูุฏ ูู ุงูุณูุงุญ ูููุชุตูุญ
                ุจุงุณุชุฎุฏุงู ุงููุงููุฑุง ูู ุฅุนุฏุงุฏุงุช ุงููุงุชู.</div>

            <button onclick="alert('ุงุฐูุจ ุฅูู ุฅุนุฏุงุฏุงุช ุงููุงุชู -> ุงูุชุทุจููุงุช -> ุงููุชุตูุญ -> ุงูุฃุฐููุงุช -> ุงููุงููุฑุง -> ุณูุงุญ')"
                class="modal-btn" style="background:#f1f5f9; color:#334155; margin-bottom:10px; font-size:12px;">
                <i class="fa-solid fa-gear"></i> <span data-i18n="activation_method">ุทุฑููุฉ ุงูุชูุนูู</span>
            </button>

            <button onclick="retryCamera()" class="modal-btn btn-confirm" data-i18n="retry_btn">ุฅุนุงุฏุฉ ุงููุญุงููุฉ</button>
        </div>
    </div>

    <div id="connectionLostModal" class="modal-overlay" style="z-index: 10000;">
        <div class="modal-box">
            <button class="btn-close-modal-x" onclick="hideConnectionLostModal()">
                <i class="fa-solid fa-xmark"></i>
            </button>
            <i class="fa-solid fa-wifi" style="font-size: 45px; color: #ef4444; margin-bottom: 15px;"></i>
            <div class="modal-title" style="color: #ef4444;" data-i18n="connection_lost_title">ุงููุทุน ุงูุงุชุตุงู</div>
            <div class="modal-text" data-i18n="connection_lost_msg">ูุง ููุฌุฏ ุงุชุตุงู ุจุงูุฅูุชุฑูุช.<br>ุฌุงุฑู ุงููุญุงููุฉ...</div>
        </div>
    </div>

    <div id="toastNotification"></div>

    <div id="adminFloatingBack" class="admin-floating-back" onclick="goBackToWelcome()">
        <i class="fa-solid fa-arrow-right"></i>
    </div>
    <div class="app-card">
        <div class="card-banner"></div>

        <div id="infoBtn" class="info-btn" onclick="showInfoModal()">
            <i class="fa-solid fa-circle-info"></i>
        </div>
        <div id="infoModal" class="modal-overlay" style="z-index: 9999999;">
            <div class="modal-box info-modern-box" dir="ltr">

                <div class="heart-icon-wrapper">
                    <i class="fa-solid fa-heart"></i>
                </div>

                <h3 class="info-title-main">
                    Designed with passion
                    <span class="ar-caption-title">ุตููู ุจูู ุดุบู</span>
                </h3>
                <p class="info-subtitle">
                    to celebrate your presence every day
                    <span class="ar-caption-sub">ููุงุญุชูุงู ุจูุฌูุฏูู ูุนูุง ูู ููู</span>
                </p>

                <div class="info-content-card">

                    <div class="faculty-section">
                        <div class="faculty-icon" style="background: transparent; padding: 0;">
                            <img src="https://k.top4top.io/p_3615d3vek1.png" alt="Logo"
                                style="width: 100%; height: 100%; object-fit: contain; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));">
                        </div>
                        <div>
                            <div style="font-size: 10px; color: #94a3b8; font-weight: 700; letter-spacing: 1px;">
                                SPONSORED BY</div>
                            <div style="font-weight: 800; color: #0f172a; font-size: 15px;">Faculty of
                                Nursing</div>
                            <div style="font-size: 13px; color: #64748b;">Al-Ryada University</div>
                        </div>
                    </div>

                    <div class="dean-highlight">
                        <span class="dean-label">Under the Deanship of</span>
                        <span class="dean-name">Prof. Dr. Naglaa Abdelmawgoud</span>
                    </div>

                    <div style="margin: 20px 0; border-top: 1px dashed #e2e8f0;"></div>

                    <div class="credits-grid">
                        <div class="credit-item">
                            <div class="credit-icon icon-green">
                                <i class="fa-solid fa-user-tie"></i>
                            </div>
                            <div class="credit-info">
                                <h4>Supervision</h4>
                                <p>Dr. Mahmoud Othman</p>
                            </div>
                        </div>

                        <div class="credit-item">
                            <div class="credit-icon icon-blue">
                                <i class="fa-solid fa-code"></i>
                            </div>
                            <div class="credit-info">
                                <h4>Development</h4>
                                <p>Abdelrahman Abdelaziz</p>
                            </div>
                        </div>
                    </div>

                </div>

                <button onclick="document.getElementById('infoModal').style.display='none'" class="btn-close-modern">
                    Close
                </button>
            </div>
        </div>
        <!-- ๐ ุฌุฑุณ ุงูุฅุดุนุงุฑุงุช (ูููู) -->
        <div class="card-body">

            <div class="hero-icon-wrapper" id="heroIconWrapper">
                <img src="https://k.top4top.io/p_3615d3vek1.png" class="hero-img" id="heroImage">
                <div class="status-icon-container" id="statusIconContainer">
                    <i class="fa-solid fa-user-nurse hero-icon" id="statusIcon"></i>
                </div>
            </div>

            <div class="info-bar">
                <div class="info-pill"><i class="fa-regular fa-clock"></i> <span id="currentTime">--:--:--</span></div>
                <div class="info-pill"><i class="fa-regular fa-calendar"></i> <span id="currentDate">--/--/----</span>
                </div>
            </div>

            <div class="card-body-content">
                <div id="screenWelcome" class="section active">
                    <div class="halo-container-v2">

                        <button id="btnLangNew" onclick="toggleSystemLanguage()" class="halo-item halo-center">
                            <!-- ุฃููููุฉ ุงูุดุจูุฉ -->
                            <i class="fa-solid fa-globe"></i>
                        </button>

                    </div>
                    <div class="faculty-title-box">
                        <span class="faculty-title-text" data-i18n="college_name">ุฌุงูุนุฉ ุงูุฑูุงุฏุฉ - ูููุฉ ุงูุชูุฑูุถ</span>
                    </div>
                    <h1 class="smart-title" data-i18n="sys_title">ูุธุงู ูุดู ุงูุญุถูุฑ</h1>
                    <p data-i18n="welcome_subtitle">ูุฑุญุจุงู ุจู. ูุฑุฌู ุงูุถุบุท ุจุงูุฃุณูู ูุชุณุฌูู ุญุถูุฑ ุงููุญุงุถุฑุฉ ุงูุญุงููุฉ.</p>

                    <div style="position: relative; z-index: 2;">
                        <button id="btnQuickMode" onclick="safeClick(this, toggleQuickMode)" class="btn-main"
                            style="display:none; background: #fff7ed; color: #ea580c; border: 2px dashed #f97316; margin-bottom: 10px; font-size: 14px;">
                            <div
                                style="display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%;">
                                <i id="quickModeIcon" class="fa-solid fa-bolt"></i>
                                <span id="quickModeText" data-i18n="quick_mode_btn">ุฅุนุฏุงุฏุงุช ุงูุชุณุฌูู ุงูุณุฑูุน โก</span>
                            </div>
                        </button>
                        <button onclick="safeClick(this, () => startProcess(false))" class="btn-main"
                            id="mainActionBtn">
                            <span data-i18n="main_reg_btn">ุชุณุฌูู ุงูุญุถูุฑ</span> <i class="fa-solid fa-fingerprint"></i>
                        </button>
                        <!-- [ููุญุฉ ุชุญูู ุงูุนููุฏ - ุจุชุตููู ุงููููุน ุงูุฃุตูู] -->
                        <div id="deanPrivateZone"
                            style="display:none; width: 100%; margin-top: 15px; animation: slideDown 0.5s ease-out;">

                            <!-- ุงูุนููุงู -->
                            <div
                                style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; padding: 0 5px;">
                                <span style="font-weight: 800; color: #1e293b; font-size: 15px;">
                                    <i class="fa-solid fa-crown" style="color: #f59e0b; margin-left: 5px;"></i>
                                    <span data-i18n="dean_zone_title">ููุทูุฉ ุงูููุงุฏุฉ</span>
                                </span>
                                <span
                                    style="font-size: 10px; background: #e0f2fe; color: #0284c7; padding: 3px 10px; border-radius: 20px; font-weight: 700; border: 1px solid #bae6fd;"
                                    data-i18n="admin_access_badge">
                                    ADMIN ACCESS
                                </span>
                            </div>

                            <!-- ุดุจูุฉ ุงูุฃุฒุฑุงุฑ -->
                            <div class="dean-grid-layout"
                                style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">

                                <!-- 1. ุฑุงุฏุงุฑ ุงููุฑุงูุจุฉ -->
                                <button onclick="openDeanOversight()" class="dean-btn-modern monitor-style">
                                    <div class="dean-icon-box"><i class="fa-solid fa-tower-broadcast fa-fade"></i></div>
                                    <div class="dean-btn-text">
                                        <span class="main-text" data-i18n="live_monitoring">ุงููุฑุงูุจุฉ ุงูุญูุฉ</span>
                                        <span class="sub-text" data-i18n="monitoring_sub">ุฑุตุฏ ุงููุงุนุงุช ูุญุธูุงู</span>
                                    </div>
                                </button>

                                <!-- 2. ุฅุฏุงุฑุฉ ุงูุชูุงุฑูุฑ -->
                                <button onclick="openDeanReports()" class="dean-btn-modern report-style">
                                    <div class="dean-icon-box"><i class="fa-solid fa-chart-pie"></i></div>
                                    <div class="dean-btn-text">
                                        <span class="main-text" data-i18n="report_management">ุฅุฏุงุฑุฉ ุงูุชูุงุฑูุฑ</span>
                                        <span class="sub-text" data-i18n="analysis_sub">ุชุญููู ุงูุจูุงูุงุช</span>
                                    </div>
                                </button>

                                <!-- 3. ุงูุฅูุฐุงุฑุงุช (ูุคุฌู) -->
                                <button class="dean-btn-modern locked-style">
                                    <div class="dean-icon-box"><i class="fa-solid fa-bell"></i></div>
                                    <div class="dean-btn-text">
                                        <span class="main-text" data-i18n="alarms">ุงูุฅูุฐุงุฑุงุช</span>
                                        <span class="sub-text" data-i18n="coming_soon">ูุฑูุจุงู</span>
                                    </div>
                                </button>

                                <!-- 4. ุงูุฅุนุฏุงุฏุงุช -->
                                <button onclick="openDeanSettings()" class="dean-btn-modern settings-style">
                                    <div class="dean-icon-box"><i class="fa-solid fa-sliders"></i></div>
                                    <div class="dean-btn-text">
                                        <span class="main-text" data-i18n="sys_settings">ุฅุนุฏุงุฏุงุช ุงููุธุงู</span>
                                        <span class="sub-text" data-i18n="full_control_sub">ุงูุชุญูู ุงููุงูู</span>
                                    </div>
                                </button>

                            </div>
                        </div>

                        <!-- ููุฏุงู ุฑุงุฏุงุฑ ุงููุฑุงูุจุฉ ุงูุณูุงุฏู (ุงููุณุฎุฉ ุงูุงุญุชุฑุงููุฉ ุงูููุธูุฉ) -->
                        <div id="deanOversightModal" class="modal-overlay">
                            <div class="modal-box pro-oversight-box">

                                <!-- ุงูููุฏุฑ ุงููููู ุงูุฌุฏูุฏ -->
                                <div class="oversight-header-premium">
                                    <div class="header-top-actions">
                                        <!-- ุฌุฑุณ ุงูุชูุจููุงุช -->
                                        <button class="icon-circle-btn">
                                            <i class="fa-solid fa-bell"></i>
                                        </button>

                                        <!-- ุฒุฑ ุงูุฅุบูุงู -->
                                        <button class="icon-circle-btn danger-text"
                                            onclick="document.getElementById('deanOversightModal').style.display='none'">
                                            <i class="fa-solid fa-xmark"></i>
                                        </button>
                                    </div>

                                    <div class="header-text-center">
                                        <h3 class="oversight-main-title" data-i18n="oversight_title">ุฑุงุฏุงุฑ ุงููุฑุงูุจุฉ
                                            ุงูุณูุงุฏู</h3>
                                        <p class="oversight-subtitle" data-i18n="oversight_sub">ูุชุงุจุนุฉ ุญูุฉ ูููุญุงุถุฑุงุช
                                            ูุงููุงุนุงุช ุงูุขู</p>
                                    </div>
                                </div>

                                <!-- ุดุฑูุท ุงูุฅุญุตุงุฆูุงุช ุงูููุฑู -->
                                <div class="dean-stats-bar-modern">
                                    <div class="d-stat-card-modern lectures-stat">
                                        <div class="stat-icon-mini"><i class="fa-solid fa-tower-broadcast"></i></div>
                                        <div class="stat-info">
                                            <span id="totalActiveLectures">0</span>
                                            <label data-i18n="active_lectures">ูุญุงุถุฑุฉ ุฌุงุฑูุฉ</label>
                                        </div>
                                    </div>
                                    <div class="d-stat-card-modern students-stat">
                                        <div class="stat-icon-mini"><i class="fa-solid fa-users"></i></div>
                                        <div class="stat-info">
                                            <span id="totalStudentsNow">0</span>
                                            <label data-i18n="present_students">ุทุงูุจ ุญุงุถุฑ</label>
                                        </div>
                                    </div>
                                </div>

                                <!-- ุญุงููุฉ ุงููุฑูุช ุงูุญูุฉ -->
                                <div id="oversightLoader" class="loader-box-center">
                                    <div class="exam-loader"></div>
                                    <p data-i18n="scanning_halls">ุฌุงุฑู ูุณุญ ุงููุงุนุงุช...</p>
                                </div>

                                <div id="oversightContainer" class="oversight-live-grid">
                                    <!-- ุงููุฑูุช ุชุธูุฑ ููุง -->
                                </div>

                            </div>
                        </div>

                        <div id="deanReportsModal" class="modal-overlay" style="z-index: 2147483647; display: none;">
                            <div class="modal-box dashboard-box">
                                <!-- Header -->
                                <div class="dashboard-header">
                                    <!-- ุงูุนููุงู -->
                                    <h2 class="dash-title">
                                        <i class="fa-solid fa-chart-pie"></i>
                                        <span data-i18n="dashboard_title">ูุฑูุฒ ุงูุชุญูููุงุช ุงููุชูุฏู</span>
                                    </h2>
                                    <div class="dash-actions">
                                        <!-- ุฃุฒุฑุงุฑ ุงูุชุตุฏูุฑ ูุน ุชุฑุฌูุฉ ุงูุนููุงู -->
                                        <button onclick="exportDashboard('image')" class="btn-export"
                                            data-i18n-title="save_as_image" title="ุญูุธ ูุตูุฑุฉ">
                                            <i class="fa-solid fa-camera"></i>
                                        </button>
                                        <button onclick="exportDashboard('pdf')" class="btn-export"
                                            data-i18n-title="save_as_pdf" title="ุญูุธ PDF">
                                            <i class="fa-solid fa-file-pdf"></i>
                                        </button>
                                        <button
                                            onclick="document.getElementById('deanReportsModal').style.display='none'"
                                            class="btn-close-dash">
                                            <i class="fa-solid fa-xmark"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- Filters -->
                                <div class="dashboard-controls">
                                    <input type="date" id="reportStartDate" class="dash-input">
                                    <span style="color:#94a3b8" data-i18n="date_to">ุฅูู</span>
                                    <input type="date" id="reportEndDate" class="dash-input">
                                    <button onclick="generateDeanAnalytics()" class="btn-dash-run">
                                        <span data-i18n="analyze_btn">ุชุญููู</span> <i class="fa-solid fa-bolt"></i>
                                    </button>
                                </div>

                                <!-- Dashboard Content -->
                                <div id="dashboardContent" class="dashboard-body">

                                    <!-- 1. ูุธุฑุฉ ุนุงูุฉ (Cards) -->
                                    <div class="stats-grid">
                                        <div class="stat-card blue">
                                            <div class="st-icon"><i class="fa-solid fa-users-viewfinder"></i></div>
                                            <div class="st-info">
                                                <span class="st-lbl" data-i18n="total_attendance_dash">ุฅุฌูุงูู
                                                    ุงูุญุถูุฑ</span>
                                                <span class="st-val" id="totalAttVal">0</span>
                                            </div>
                                        </div>
                                        <div class="stat-card orange">
                                            <div class="st-icon"><i class="fa-solid fa-star"></i></div>
                                            <div class="st-info">
                                                <span class="st-lbl" data-i18n="avg_rating_dash">ูุชูุณุท ุงูุชูููู</span>
                                                <span class="st-val" id="avgRatingVal">0.0</span>
                                            </div>
                                        </div>
                                        <div class="stat-card green">
                                            <div class="st-icon"><i class="fa-solid fa-screwdriver-wrench"></i></div>
                                            <div class="st-info">
                                                <span class="st-lbl" data-i18n="tools_req_dash">ุทูุจ ุฃุฏูุงุช</span>
                                                <span class="st-val" id="totalToolsVal">0</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 2. ุงูุฑุณูู ุงูุจูุงููุฉ (Charts) -->
                                    <div class="charts-container">

                                        <!-- ุตู 1 -->
                                        <div class="chart-row">
                                            <div class="chart-box">
                                                <h4><i class="fa-solid fa-chart-area"></i> <span
                                                        data-i18n="chart_subjects">ุงูุฃูุซุฑ ุญุถูุฑุงู (ุงูููุงุฏ)</span></h4>
                                                <canvas id="subjectsChart"></canvas>
                                            </div>
                                            <div class="chart-box">
                                                <h4><i class="fa-solid fa-calendar-week"></i> <span
                                                        data-i18n="chart_days">ูุดุงุท ุงูุฃูุงู (ุงูุฐุฑูุฉ)</span></h4>
                                                <canvas id="daysChart"></canvas>
                                            </div>
                                        </div>

                                        <!-- ุตู 2 -->
                                        <div class="chart-row">
                                            <div class="chart-box">
                                                <h4><i class="fa-solid fa-user-doctor"></i> <span
                                                        data-i18n="chart_ratings">ุฑุถุง ุงูุทูุงุจ ุนู ุงูุฏูุงุชุฑุฉ</span></h4>
                                                <canvas id="ratingsChart"></canvas>
                                            </div>
                                            <div class="chart-box">
                                                <h4><i class="fa-solid fa-toolbox"></i> <span
                                                        data-i18n="chart_tools">ุงูุฃุฏูุงุช ุงูุฃูุซุฑ ุทูุจุงู</span></h4>
                                                <canvas id="toolsChart"></canvas>
                                            </div>
                                        </div>

                                    </div>

                                    <!-- ุงูุชูููุน -->
                                    <div class="report-footer">
                                        <span data-i18n="report_footer_text">ุชู ุงุณุชุฎุฑุงุฌ ุงูุชูุฑูุฑ ุขููุงู ูู ูุธุงู ุฅุฏุงุฑุฉ
                                            ุงููููุฉ ุงูุฐูู -</span>
                                        <span id="reportGenDate">--</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- [ูุงูุฐุฉ ุฑุงุฏุงุฑ ุงููุฑุงูุจุฉ ุงูุตูุฑูุฉ] -->
                        <div id="deanOversightModal" class="modal-overlay" style="z-index: 2147483647; display: none;">
                            <div class="modal-box dean-oversight-box">
                                <div class="oversight-header">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div class="live-indicator">LIVE</div>
                                        <h3 style="margin: 0; font-size: 16px;">ุงูุฑุตุฏ ุงููุญุธู ูููุงุนุงุช</h3>
                                    </div>
                                    <button onclick="document.getElementById('deanOversightModal').style.display='none'"
                                        class="btn-close-stylish" style="width: auto; border:none;">&times;</button>
                                </div>

                                <div id="oversightRoomsContainer" class="oversight-scroll-area">
                                    <!-- ุงููุญุงุถุฑุงุช ุณุชุธูุฑ ููุง ุจุชุฑุชูุจ ุงูุฃููููุฉ -->
                                </div>
                            </div>
                        </div>
                        <!-- [1. ุฅุถุงูุฉ ุจุงุฑ ุจุญุซ "ููุงูู" ุงูุฐูู] -->
                        <!-- ุฃุถููุง ID ูุงูุชุฑุงุถูุงู ูู ูุฎูู display: none -->
                        <div id="makaniSearchBar" class="makani-search-container" style="display: none;">
                            <div class="makani-input-wrapper">
                                <i class="fa-solid fa-location-crosshairs search-icon-main"></i>
                                <input type="text" id="makaniInput" data-i18n-placeholder="makani_placeholder"
                                    placeholder="ุงุจุญุซ ุนู ูุงุฏุฉุ ุฏูุชูุฑุ ุฃู ููุฏ ุฒููู..."
                                    onkeyup="if(event.key === 'Enter') startSmartSearch()">
                                <button onclick="startSmartSearch()" id="btnMakani">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                </button>
                            </div>
                        </div>

                        <!-- [2. ูุงูุฐุฉ ูุชุงุฆุฌ ุงูุจุญุซ ุงูุฐูู] -->
                        <div id="makaniResultsModal" class="modal-overlay" style="z-index: 2147483647; display: none;"
                            onclick="this.style.display='none'">
                            <div class="modal-box makani-result-box" onclick="event.stopPropagation()">
                                <div class="result-header">
                                    <i class="fa-solid fa-radar fa-spin-slow"></i>
                                    <span data-i18n="radar_results_title">ูุชุงุฆุฌ ุฑุงุฏุงุฑ ุงููููุฉ</span>
                                </div>
                                <div id="makaniContent">
                                    <!-- ุงููุชุงุฆุฌ ุณุชุธูุฑ ููุง -->
                                </div>
                                <button onclick="document.getElementById('makaniResultsModal').style.display='none'"
                                    class="btn-close-stylish" data-i18n="close_btn">ุฅุบูุงู</button>
                            </div>
                        </div>
                        <button id="btnToggleSession" onclick="safeClick(this, toggleSessionState)" class="btn-main"
                            style="display:none; background: #e2e8f0; color: #475569; border: 2px solid #cbd5e1; margin-bottom: 15px; margin-top: 10px;">
                            <div
                                style="display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%;">
                                <i id="sessionIcon" class="fa-solid fa-lock"></i>
                                <span id="sessionText" data-i18n="checking_status">ุฌุงุฑู ูุญุต ุงูุญุงูุฉ...</span>
                            </div>
                        </button>
                        <div class="admin-controls-grid">
                            <button id="btnAdminLogin" onclick="handleAdminTripleClick(this)"
                                class="admin-sub-btn btn-admin-login">
                                <i class="fa-solid fa-user-doctor sub-btn-icon"></i>
                                <span data-i18n="faculty_portal">ุจูุงุจุฉ ุงูุฏูุงุชุฑุฉ</span>
                            </button>

                            <button id="btnAdminLogout" onclick="safeClick(this, openLogoutModal)"
                                class="admin-sub-btn btn-admin-logout" style="display:none;">
                                <i class="fa-solid fa-arrow-right-from-bracket fa-flip-horizontal sub-btn-icon"></i>
                                <span data-i18n="admin_logout">ุฎุฑูุฌ ุงููุณุคูู</span>
                            </button>
                            <button id="btnViewReport" onclick="handleReportClick()"
                                class="admin-sub-btn btn-report locked">
                                <i id="reportIcon" class="fa-solid fa-list-check sub-btn-icon"></i>
                                <span data-i18n="attendance_report">ุณุฌู ุงูุญุถูุฑ</span>
                            </button>
                            <!-- ุฒุฑุงุฑ ุทูุจ ุงูุชุฌููุฒุงุช (ูุงุฒู ูููู ูุงุฎุฏ ุงูู ID ุฏู ุนุดุงู ูุฎุชูู ูู ุนูุฏ ุงูุทูุงุจ) -->
                            <button id="btnToolsRequest" onclick="openToolsRequestModal()"
                                class="admin-sub-btn btn-tools"
                                style="background: #ecfdf5; color: #047857; border-color: #a7f3d0; display: none;">
                                <i class="fa-solid fa-briefcase-medical sub-btn-icon"></i>
                                <span data-i18n="tools_request">ุทูุจ ุชุฌููุฒุงุช</span>
                            </button>
                            <button onclick="openExamModal()" class="admin-sub-btn btn-exams">
                                <i class="fa-solid fa-file-pen sub-btn-icon"></i>
                                <span style="font-size: 13px;" data-i18n="exam_management">ุชูุธูู ุงูุงูุชุญุงูุงุช</span>
                            </button>

                            <button onclick="safeClick(this, () => location.reload())"
                                class="admin-sub-btn btn-refresh">
                                <i class="fa-solid fa-arrows-rotate sub-btn-icon" style="font-size: 22px;"></i>
                            </button>

                            <button onclick="openDataEntryMenu()" class="admin-sub-btn btn-data-entry" id="btnDataEntry"
                                style="display:none;">
                                <i class="fa-solid fa-database sub-btn-icon"></i>
                                <span data-i18n="data_entry">ุฅุฏุฎุงู ุงูุจูุงูุงุช</span>
                            </button>
                        </div>

                        <div id="installAppPrompt" class="install-prompt-box" onclick="triggerAppInstall()">
                            <div class="install-icon-box"><i class="fa-solid fa-download"></i></div>
                            <div class="install-text-col">
                                <div class="install-title" data-i18n="install_app">ุชุซุจูุช ุงูุชุทุจูู</div>
                                <div class="install-subtitle" data-i18n="install_app_sub">ุฃุถู ุงููุธุงู ููุดุงุดุฉ ุงูุฑุฆูุณูุฉ
                                </div>
                            </div>
                            <i class="fa-solid fa-chevron-left" style="font-size:12px; color:#64748b;"></i>
                        </div>
                        <div class="academic-footer">
                        </div>
                    </div>
                </div>
                <div id="screenAdminLogin" class="section">
                    <h1 data-i18n="admin_login_title">ุฏุฎูู ุงููุณุคูู</h1>
                    <p data-i18n="admin_login_sub">ุฃุฏุฎู ุจูุงูุงุช ุงูุญุณุงุจ ุงูุฅุฏุงุฑู.</p>
                    <div id="adminAlert" style="display:none;" class="alert-box"></div>

                    <div class="input-group">
                        <input type="email" id="adminEmailInput" class="modern-input"
                            data-i18n-placeholder="email_placeholder" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู"
                            style="margin-bottom: 10px; direction: ltr;" required>

                        <div style="position: relative; width: 100%;">
                            <input type="password" id="adminPassword" class="modern-input"
                                data-i18n-placeholder="password_placeholder" placeholder="ูููุฉ ุงููุฑูุฑ"
                                style="padding-left: 45px;" required>

                            <i class="fa-solid fa-eye" id="eyeIcon" onclick="togglePasswordVisibility()"
                                style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #94a3b8; font-size: 18px; z-index: 10;">
                            </i>
                        </div>
                    </div>

                    <button onclick="checkAdminPassword()" class="btn-main">
                        <span data-i18n="activate_btn">ุชูุนูู</span> <i class="fa-solid fa-key"></i>
                    </button>
                    <button onclick="goBackToWelcome()" class="btn-back-modern">
                        <span data-i18n="back_home_btn">ุงูุนูุฏุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ</span>
                        <i class="fa-solid fa-arrow-left"></i>
                    </button>
                </div>
                <div id="screenLoading" class="section">
                    <h1 style="margin-top: 10px;">ุฌุงุฑู ุงูุชุญูู...</h1>
                    <i class="fa-solid fa-circle-notch fa-spin"
                        style="font-size:40px; color:var(--primary); margin: 20px 0;"></i>
                    <p>ูุฑุฌู ุงูุณูุงุญ ูููุชุตูุญ ุจุชุญุฏูุฏ ูููุนู ุงูุฌุบุฑุงูู.</p>

                    <button onclick="openMapsToRefreshGPS()" class="btn-google-maps" style="margin-top: 20px;">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/a/aa/Google_Maps_icon_%282020%29.svg"
                            class="maps-icon-img" alt="Maps">
                        <span>ูุชุญ ุงูุฎุฑูุทุฉ (ูุชูุดูุท GPS)</span>
                    </button>
                </div>

                <div id="screenReadyToStart" class="section">
                    <div style="margin: 30px 0;">
                        <i class="fa-solid fa-map-location-dot"
                            style="font-size: 60px; color: #10b981; animation: popUp 0.5s;"></i>
                    </div>
                    <h1 style="color: #10b981;">ุงููููุน ูุทุงุจู</h1>
                    <p>ุชู ุงูุชุญูู ูู ุชูุงุฌุฏู ูู ุงููููุฉ ุจูุฌุงุญ.</p>

                    <button onclick="switchScreen('screenDataEntry')" class="btn-main" style="margin-top: 10px;"> ุณุฌู
                        ุงูุขู <i class="fa-solid fa-arrow-left"></i></button>
                </div>

                <div id="screenDataEntry" class="section">
                    <button onclick="goBackToWelcome()" class="floating-back-btn">
                        <!-- ๐ ุชู ุชุบููุฑ left ุฅูู right ูููุงุณุจ ุงุชุฌุงู ุงูุนูุฏุฉ ุงูุนุฑุจู -->
                        <i class="fa-solid fa-arrow-right"></i>
                    </button>

                    <div
                        style="display: flex; flex-direction: column; align-items: center; justify-content: flex-start; padding-top: 20px; min-height: 80vh;">

                        <div
                            style="background: white; padding: 40px 25px 30px 25px; border-radius: 24px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); width: 90%; max-width: 360px; text-align: center; position: relative; margin-top: 30px;">

                            <div style="
                position: absolute; 
                top: -40px; 
                left: 50%; 
                transform: translateX(-50%); 
                width: 80px; height: 80px; 
                background: #e0f2fe; 
                border-radius: 50%; 
                display: flex; align-items: center; justify-content: center; 
                border: 6px solid #f8fafc; 
                box-shadow: 0 10px 25px rgba(14, 165, 233, 0.25);
            ">
                                <i class="fa-solid fa-satellite-dish fa-beat"
                                    style="font-size: 32px; color: #0ea5e9; --fa-animation-duration: 3s;"></i>
                            </div>

                            <div id="step1_search" class="minimal-join-container">

                                <!-- โก Top Identity Icon -->
                                <div class="top-status-icon">
                                    <div class="icon-glow"></div>
                                    <i class="fa-solid fa-bolt-lightning"></i>
                                </div>

                                <!-- ๐ English Headers -->
                                <div class="header-content-center">
                                    <h2 class="auth-main-title" data-i18n="search_header">SESSION</h2>
                                </div>

                                <!-- ๐ข PIN Input Area (Perfectly Centered) -->
                                <div class="pin-input-wrapper">
                                    <div class="floating-group tech-input-glass">
                                        <input type="text" id="attendanceCode" class="floating-input en-font pin-field"
                                            placeholder=" " inputmode="numeric" maxlength="6"
                                            oninput="this.value = this.value.replace(/[^0-9]/g, '');" required>
                                        <label class="floating-label" data-i18n="pin_label">6-DIGIT PIN</label>
                                    </div>
                                </div>

                                <!-- ๐ฅ JOIN Button -->
                                <button id="btnSearchSession" onclick="searchForSession()"
                                    class="tech-link-btn join-style">
                                    <span class="btn-text" data-i18n="join_now_btn">JOIN NOW</span>
                                    <div class="btn-icon-circle"><i class="fa-solid fa-arrow-right-to-bracket"></i>
                                    </div>
                                </button>

                                <!-- ๐ก Footer Hint -->
                                <p class="minimal-hint">ENTER THE 6-DIGIT CODE FROM YOUR DOCTOR</p>
                            </div>
                            <div id="step2_auth" style="display: none; animation: fadeIn 0.5s ease-out;">

                                <!-- โฑ๏ธ 1. ูุจุณููุฉ ุงูุนุฏุงุฏ ุงูุฒููู (ุชุธูุฑ ูู ุงูุฃุนูู ุจูุถูุญ) -->
                                <div id="authCountdownBox"
                                    style="display: flex; justify-content: center; margin-bottom: 25px;">
                                    <div class="auth-timer-pill">
                                        <i class="fa-solid fa-clock fa-spin-slow"></i>
                                        <span id="authTimerDisplay">--:--</span>
                                    </div>
                                </div>

                                <!-- ๐ฐ 2. ูุงุฑุช ุจูุงูุงุช ุงููุญุงุถุฑุฉ (ุชุตููู ูููู ููุธู) -->
                                <div class="royal-session-card">
                                    <div class="r-card-accent"></div>
                                    <div class="r-avatar-area">
                                        <div class="r-avatar-glow"></div>
                                        <div class="r-avatar-inner" id="foundDocAvatar">
                                            <i class="fa-solid fa-user-doctor"></i>
                                        </div>
                                    </div>

                                    <div class="r-info-content">
                                        <span class="r-label-tag" data-i18n="current_lecturer">ุงููุญุงุถุฑ
                                            ุงูุญุงูู</span>
                                        <h3 id="foundDocName" class="r-doctor-name">---</h3>
                                        <h4 id="foundSubjectName" class="r-subject-title">--</h4>
                                    </div>
                                </div>

                                <!-- ๐ 3. ููุทูุฉ ุฅุฏุฎุงู ูููุฉ ุงูุณุฑ (ุชุตููู Floating Label) -->
                                <div class="auth-input-zone">
                                    <div class="floating-group">
                                        <i class="fa-solid fa-lock icon-inside"></i>
                                        <input type="text" id="sessionPass" class="floating-input en-font"
                                            placeholder=" " required>
                                        <label class="floating-label" data-i18n="session_pass_label">PASSWORD</label>
                                    </div>
                                </div>

                                <!-- ๐ 4. ุฃุฒุฑุงุฑ ุงูุชุญูู -->
                                <div class="auth-action-area">
                                    <button id="btnJoinFinal" onclick="joinSessionAction()"
                                        class="btn-main join-btn-premium">
                                        ุชุฃููุฏ ูุฏุฎูู ุงููุงุนุฉ <i class="fa-solid fa-door-open"></i>
                                    </button>

                                    <button onclick="resetSearchSession()" class="btn-cancel-flat">
                                        <i class="fa-solid fa-arrow-rotate-right"></i> ุจุญุซ ุนู ุฌูุณุฉ ุฃุฎุฑู
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div id="screenFaceCheck" class="section">
                            <h1>ุงูุชุนุฑู ุนูู ุงููููุฉ</h1>
                            <div class="cam-container" id="camBorder">
                                <video id="video" autoplay muted playsinline></video>
                                <div id="loaderSpinner" class="spinner-overlay">
                                    <i class="fa-solid fa-user-shield large-loader-icon"></i>
                                    <div class="spinner"></div>
                                    <p
                                        style="color:var(--text-main); font-size:14px; margin-top:15px; font-weight:bold;">
                                        ุฌุงุฑู
                                        ุชููุฆุฉ ุงููุธุงู...</p>
                                </div>
                                <div id="modernTimerContainer" class="timer-circular-wrapper">
                                    <svg class="timer-svg-face" viewBox="0 0 100 100">
                                        <circle class="timer-circle-bg-face" cx="50" cy="50" r="45"></circle>
                                        <circle class="timer-circle-fg" id="timerProgressFace" cx="50" cy="50" r="45">
                                        </circle>
                                    </svg>
                                    <div class="timer-text-box">
                                        <span class="timer-number-face en-font" id="timerNumberFace">3</span>
                                    </div>
                                </div>
                                <div id="alertBadge" class="alert-badge">โ๏ธ</div>
                            </div>
                            <h3 id="statusTxt" style="color:#0ea5e9; font-weight:bold; margin-top:10px;">ุฌุงุฑู ุงูุชุดุบูู...
                            </h3>
                            <p style="font-size:12px; margin-top:5px;">ูุฌุจ ุฃู ูููู ูุฌูู ุซุงุจุชุงู ูุจุฏูู ุถุญู</p>
                        </div>

                        <div id="screenScanQR" class="section">
                            <h1 class="scan-title-modern">ูุณุญ ุฑูุฒ ุงูุญุถูุฑ</h1>

                            <div class="student-info-card">
                                <div class="student-info-item">
                                    <div class="student-info-icon"><i class="fa-solid fa-user-graduate"></i></div>
                                    <span class="student-info-label">ุงุณู ุงูุทุงูุจ / ุงูุทุงูุจุฉ</span>
                                    <span class="student-info-value" id="scanNameDisplay">--</span>
                                </div>
                                <div class="student-info-item">
                                    <div class="student-info-icon"><i class="fa-solid fa-id-card"></i></div>
                                    <span class="student-info-label">ุงูููุฏ ุงูุฌุงูุนู (ID)</span>
                                    <span class="student-info-value en-font" id="scanIDDisplay">--</span>
                                </div>
                            </div>

                            <div class="custom-select-wrapper" id="yearSelectWrapper">
                                <label class="custom-select-label">ุงููุฑูุฉ ุงูุฏุฑุงุณูุฉ</label>
                                <div class="custom-select-trigger" data-default-text="-- ุงุฎุชุฑ ุงููุฑูุฉ --">
                                    <div class="trigger-content">
                                        <div class="trigger-icon"><i class="fa-solid fa-layer-group"></i></div>
                                        <span class="trigger-text">-- ุงุฎุชุฑ ุงููุฑูุฉ --</span>
                                    </div>
                                    <i class="fa-solid fa-chevron-down arrow-icon"></i>
                                </div>
                                <div class="custom-options-overlay" onclick="closeSelect(this)"></div>
                                <div class="custom-options">
                                    <div class="sheet-handle"></div>
                                    <div class="options-title">ุงุฎุชุฑ ุงููุฑูุฉ ุงูุฏุฑุงุณูุฉ</div>
                                    <div class="custom-option" data-value="first_year"><span>ุงููุฑูุฉ ุงูุฃููู</span></div>
                                    <div class="custom-option" data-value="second_year"><span>ุงููุฑูุฉ ุงูุซุงููุฉ</span>
                                    </div>
                                </div>
                                <select id="yearSelect" style="display:none;">
                                    <option value="" disabled selected>-- ุงุฎุชุฑ ุงููุฑูุฉ --</option>
                                    <option value="first_year">ุงููุฑูุฉ ุงูุฃููู</option>
                                    <option value="second_year">ุงููุฑูุฉ ุงูุซุงููุฉ</option>
                                </select>
                            </div>

                            <div class="custom-select-wrapper disabled" id="groupSelectWrapper">
                                <label class="custom-select-label">ุฑูู ุงููุฌููุนุฉ (ุงูุฌุฑูุจ)</label>
                                <div class="custom-select-trigger" data-default-text="-- ุงุฎุชุฑ ุงููุฑูุฉ ุฃููุงู --">
                                    <div class="trigger-content">
                                        <div class="trigger-icon"><i class="fa-solid fa-users-rectangle"></i></div>
                                        <span class="trigger-text">-- ุงุฎุชุฑ ุงููุฑูุฉ ุฃููุงู --</span>
                                    </div>
                                    <i class="fa-solid fa-chevron-down arrow-icon"></i>
                                </div>
                                <div class="custom-options-overlay" onclick="closeSelect(this)"></div>
                                <div class="custom-options">
                                    <div class="sheet-handle"></div>
                                    <div class="options-title">ุงุฎุชุฑ ุงููุฌููุนุฉ</div>
                                    <div id="groupOptionsContainer" style="max-height: 250px; overflow-y: auto;"></div>
                                </div>
                                <select id="groupSelect" style="display:none;" onchange="checkAllConditions()">
                                    <option value="" disabled selected>-- ุงุฎุชุฑ ุงููุฑูุฉ ุฃููุงู --</option>
                                </select>
                            </div>

                            <div class="custom-select-wrapper disabled" id="subjectSelectWrapper">
                                <label class="custom-select-label">ุงููุงุฏุฉ ุงูุฏุฑุงุณูุฉ</label>
                                <div class="custom-select-trigger" data-default-text="-- ุงุฎุชุฑ ุงููุฑูุฉ ุฃููุงู --">
                                    <div class="trigger-content">
                                        <div class="trigger-icon"><i class="fa-solid fa-book-open"></i></div>
                                        <span class="trigger-text">-- ุงุฎุชุฑ ุงููุฑูุฉ ุฃููุงู --</span>
                                    </div>
                                    <i class="fa-solid fa-chevron-down arrow-icon"></i>
                                </div>
                                <div class="custom-options-overlay" onclick="closeSelect(this)"></div>
                                <div class="custom-options">
                                    <div class="sheet-handle"></div>
                                    <div class="options-title">ุงุฎุชุฑ ุงููุงุฏุฉ ุงูุฏุฑุงุณูุฉ</div>
                                    <div id="subjectOptionsContainer"></div>
                                </div>
                                <select id="subjectSelect" style="display:none;" onchange="checkAllConditions()">
                                    <option value="" disabled selected>-- ุงุฎุชุฑ ุงููุฑูุฉ ุฃููุงู --</option>
                                </select>
                            </div>

                            <div class="custom-select-wrapper" id="hallSelectWrapper">
                                <label class="custom-select-label">ุงููุฏุฑุฌ ุงูุฏุฑุงุณู (ูุทููุจ)</label>
                                <div class="custom-select-trigger" data-default-text="-- ุงุฎุชุฑ ุงููุฏุฑุฌ --">
                                    <div class="trigger-content">
                                        <div class="trigger-icon"><i class="fa-solid fa-building-columns"></i></div>
                                        <span class="trigger-text">-- ุงุฎุชุฑ ุงููุฏุฑุฌ --</span>
                                    </div>
                                    <i class="fa-solid fa-chevron-down arrow-icon"></i>
                                </div>
                                <div class="custom-options-overlay" onclick="closeSelect(this)"></div>
                                <div class="custom-options">
                                    <div class="sheet-handle"></div>
                                    <div class="options-title">ุงุฎุชุฑ ุงููุฏุฑุฌ ุงูุฏุฑุงุณู</div>

                                    <div class="hall-search-box">
                                        <input type="text" id="hallSearchInput" class="hall-search-input"
                                            placeholder="ุจุญุซ ุนู ุงููุงุนุฉ..." onclick="event.stopPropagation()">
                                    </div>

                                    <div id="hallOptionsContainer" style="max-height: 250px; overflow-y: auto;"></div>
                                </div>
                                <select id="hallSelect" style="display:none;" onchange="checkAllConditions()">
                                    <option value="" disabled selected>-- ุงุฎุชุฑ ุงููุฏุฑุฌ --</option>
                                </select>
                            </div>

                            <button onclick="safeClick(this, startFaceVerificationProcess)" class="btn-verify-identity"
                                id="btnVerify">
                                <i class="fa-solid fa-fingerprint"></i> ุงูุชุญูู ูู ุงููููุฉ
                            </button>

                            <div id="adminBypassContainer"
                                style="display:block; margin-top:10px; margin-bottom:15px; text-align:right;">
                                <label
                                    style="display:flex; align-items:center; gap:10px; cursor:pointer; background:#fff; padding:10px; border-radius:12px; border:1px solid #e2e8f0;">
                                    <input type="checkbox" id="bypassCheckbox"
                                        style="width:20px; height:20px; accent-color:#10b981;"
                                        onchange="toggleBypassMode()">
                                    <span style="font-weight:bold; color:#ef4444; font-size:13px;">ุชุฌุงูุฒ ุงูุชุญูู
                                        (ููุชุฌุฑุจุฉ)</span>
                                </label>
                            </div>

                            <div id="qr-reader">
                                <div class="scanner-laser"></div>
                            </div>
                            <div id="startScanCard" class="qr-card-trigger" onclick="safeClick(this, startQrScanner)">
                                <div class="qr-card-icon"><i class="fa-solid fa-camera"></i></div>
                                <div>
                                    <div class="qr-card-text">ุงุถุบุท ููุชุญ ุงููุงููุฑุง</div>
                                    <div class="qr-card-sub">ูุฌู ุงููุงููุฑุง ูุญู ุงูุฑูุฒ</div>
                                </div>
                            </div>
                            <div id="scanSuccessMsg" class="scan-success-badge"><i class="fa-solid fa-check-circle"></i>
                                ุชู ูุณุญ
                                ุงูููุฏ ุจูุฌุงุญ</div>
                            <button type="button" id="retryCamBtn" class="btn-secondary" onclick="startQrScanner()"
                                style="display:none; background: #fee2e2; color: #ef4444; margin-bottom: 15px;"><i
                                    class="fa-solid fa-rotate-right"></i> ุฅุนุงุฏุฉ ุชุดุบูู ุงููุงููุฑุง</button>
                            <input type="hidden" id="sessionPass" required>
                            <button type="button" id="submitBtn" class="btn-main" disabled
                                style="opacity:0.6; cursor:not-allowed;">ุชุฃููุฏ ุงูุญุถูุฑ <i
                                    class="fa-solid fa-paper-plane"></i></button>
                        </div>

                        <div id="screenSuccess" class="section">
                            <h1 style="color:#10b981; margin-bottom: 15px;">ุชู ุงูุชุณุฌูู ุจูุฌุงุญ</h1>
                            <div class="ticket-container">
                                <div class="ticket-header">
                                    <div class="ticket-icon"><i class="fa-solid fa-check"></i></div>
                                    <div style="font-weight: 900; font-size: 18px;">ุชุฃููุฏ ุญุถูุฑ</div>
                                </div>
                                <div class="ticket-body">
                                    <div class="verified-badge">VERIFIED</div>
                                    <div class="t-row"><span class="t-label">Name</span><span class="t-value"
                                            id="receiptName">--</span></div>
                                    <div class="t-row"><span class="t-label">ID</span><span class="t-value english-num"
                                            id="receiptID">--</span></div>
                                    <div class="ticket-dashed-line"></div>
                                    <div class="t-row"><span class="t-label">Group</span><span
                                            class="t-value english-num" id="receiptGroup">--</span></div>
                                    <div class="t-row"><span class="t-label">Subject</span><span class="t-value"
                                            id="receiptSubject" style="color:var(--primary)">--</span></div>
                                    <div class="t-row"><span class="t-label">Hall</span><span
                                            class="t-value english-num" id="receiptHall">--</span></div>
                                    <div class="t-row"><span class="t-label">Date</span><span
                                            class="t-value english-num" id="receiptDate">--</span></div>
                                    <div class="t-row"><span class="t-label">Time</span><span
                                            class="t-value english-num" id="receiptTime">--</span></div>
                                </div>
                            </div>
                            <div style="color:#64748b; font-weight:700; font-size:12px; margin-top:10px;">
                                <i class="fa-solid fa-circle-check" style="color:#10b981;"></i> ุชู ุญูุธ ุงูุจูุงูุงุช ูู
                                ุงููุธุงู ุจูุฌุงุญ
                            </div>
                        </div>

                        <div id="screenError" class="section">
                            <h1 style="color:#ef4444;">ุชูุจูู</h1>
                            <div id="errorMsg" class="alert-box"></div>
                            <button id="retryBtn" class="btn-main" style="background:#334155; margin-top:20px;">ุญุงูู ูุฑุฉ
                                ุฃุฎุฑู</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="manageUploadsModal" class="modal-overlay" style="z-index: 200000000;">
                <div class="modal-box">
                    <div class="report-modal-header">
                        <div class="modal-title" style="margin:0; font-size:16px;">ุณุฌู ุงููููุงุช ุงููุฑููุนุฉ</div>
                        <button onclick="document.getElementById('manageUploadsModal').style.display='none'"
                            class="btn-close-stylish" style="width:auto; padding:5px 15px;">ุฅุบูุงู</button>
                    </div>
                    <div class="report-views-container">
                        <div style="padding:15px; overflow-y:auto; height:100%;">
                            <div id="uploadsHistoryContainer">
                                <div style="text-align:center; padding:20px;"><i
                                        class="fa-solid fa-spinner fa-spin"></i> ุฌุงุฑู
                                    ุงูุชุญููู...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="manageStudentsModal" class="modal-overlay" style="z-index: 200000000;">

                <div class="modal-box" style="background: #f8fafc; padding: 0; overflow: hidden;">

                    <div class="report-modal-header">
                        <div class="modal-title" style="margin:0; font-size:16px; color:#0f172a;">ุฅุฏุงุฑุฉ ุจูุงูุงุช ุงูุทูุงุจ
                        </div>
                        <button onclick="closeManageStudentsModal()" class="btn-close-stylish"
                            style="width:auto; padding:5px 15px;">ุฅุบูุงู</button>
                    </div>

                    <div class="report-views-container" style="padding: 20px;">

                        <div class="modern-card-action">
                            <div class="card-label"><i class="fa-solid fa-layer-group"></i> ุงูุฎุทูุฉ ุงูุฃููู: ุชุญุฏูุฏ ุงููุฑูุฉ
                            </div>
                            <div class="modern-select-wrapper">
                                <select id="uploadLevelSelect" class="modern-select-input">
                                    <option value="" disabled selected>-- ุงุถุบุท ูุงุฎุชูุงุฑ ุงููุฑูุฉ --</option>
                                    <option value="1">ุงููุฑูุฉ ุงูุฃููู</option>
                                    <option value="2">ุงููุฑูุฉ ุงูุซุงููุฉ</option>
                                    <option value="3">ุงููุฑูุฉ ุงูุซุงูุซุฉ</option>
                                    <option value="4">ุงููุฑูุฉ ุงูุฑุงุจุนุฉ</option>
                                </select>
                                <i class="fa-solid fa-chevron-down select-arrow"></i>
                            </div>
                        </div>

                        <div class="modern-card-action"
                            style="margin-top: 15px; border-color: #bbf7d0; background: #f0fdf4;">
                            <div class="card-label" style="color: #166534;"><i class="fa-solid fa-cloud-arrow-up"></i>
                                ุงูุฎุทูุฉ
                                ุงูุซุงููุฉ: ุฑูุน ุงูููู</div>
                            <input type="file" id="excelFileInput" style="display: none;" accept=".xlsx, .xls" />
                            <button onclick="triggerUploadProcess()" class="btn-action-modern upload-btn">
                                ุงุฎุชุฑ ููู Excel <i class="fa-solid fa-file-excel"></i>
                            </button>
                            <div id="uploadStatus"
                                style="font-size: 11px; text-align: center; margin-top: 8px; color: #166534; font-weight:bold; min-height: 15px;">
                            </div>
                        </div>

                        <div class="separator-line">ุฃู</div>

                        <button onclick="openUploadHistory()" class="btn-history-modern">
                            <i class="fa-solid fa-clock-rotate-left"></i> ุนุฑุถ ุงูุณุฌู / ุญุฐู ุดูุช ุณุงุจู
                        </button>

                    </div>
                </div>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

            <script type="module" src="security.js"></script>

            <script type="module" src="script.js"></script>
            <!-- ๐ฅ ุชู ุฑูุน ุงูู z-index ูุชุนุฏูู ุงููุญุชูู ูุฅุถุงูุฉ ุฎูุงุฑ ุงูุฃุณุจูุน -->
            <div id="attendanceRecordsModal" class="modal-overlay" style="z-index: 200000000;">
                <div class="modal-box">
                    <div class="report-modal-header">
                        <div class="modal-title" style="margin:0; font-size:16px;">ุฃุฑุดูู ุงูุณุฌูุงุช</div>
                        <button onclick="document.getElementById('attendanceRecordsModal').style.display='none'"
                            class="btn-close-stylish" style="width:auto; padding:5px 15px;">ุฅุบูุงู</button>
                    </div>

                    <div class="report-views-container" style="padding: 20px;">

                        <!-- ุฎูุงุฑุงุช ููุน ุงูุชูุฑูุฑ (ูููู / ุฃุณุจูุนู) -->
                        <label style="display:block; margin-bottom:10px; font-weight:bold; color:#1e293b;">ููุน
                            ุงูุชูุฑูุฑ:</label>
                        <div class="segment-control"
                            style="margin-bottom: 15px; display:flex; background:#f1f5f9; padding:4px; border-radius:10px;">
                            <input type="radio" name="reportType" id="repDaily" value="daily" checked
                                style="display:none;" onchange="toggleDateLabel()">
                            <label for="repDaily"
                                style="flex:1; text-align:center; padding:8px; cursor:pointer; border-radius:8px; font-size:13px; font-weight:bold; transition:0.3s;"
                                id="lblDaily">ููู ูุญุฏุฏ</label>

                            <input type="radio" name="reportType" id="repWeekly" value="weekly" style="display:none;"
                                onchange="toggleDateLabel()">
                            <label for="repWeekly"
                                style="flex:1; text-align:center; padding:8px; cursor:pointer; border-radius:8px; font-size:13px; font-weight:bold; transition:0.3s;"
                                id="lblWeekly">ุฃุณุจูุน ูุงูู</label>
                        </div>

                        <!-- ุงูุนููุงู ุณูุชุบูุฑ ุจุงูุฌุงูุงุณูุฑูุจุช ุญุณุจ ุงูุงุฎุชูุงุฑ -->
                        <label id="dateInputLabel"
                            style="display:block; margin-bottom:5px; font-weight:bold; color:#1e293b;">ุชุงุฑูุฎ
                            ุงููุญุงุถุฑุฉ:</label>
                        <input type="date" id="historyDateInput" class="modern-input"
                            style="width:100%; margin-bottom:15px;">

                        <label style="display:block; margin-bottom:5px; font-weight:bold; color:#1e293b;">ุงููุฑูุฉ
                            ุงูุฏุฑุงุณูุฉ:</label>
                        <div class="modern-select-wrapper" style="margin-bottom:15px;">
                            <select id="archiveLevelSelect" class="modern-select-input"
                                onchange="clearSearchBox(); updateArchiveSubjects()">
                                <option value="" disabled selected>-- ุงุฎุชุฑ ุงููุฑูุฉ --</option>
                                <option value="1">ุงููุฑูุฉ ุงูุฃููู</option>
                                <option value="2">ุงููุฑูุฉ ุงูุซุงููุฉ</option>
                                <option value="3">ุงููุฑูุฉ ุงูุซุงูุซุฉ</option>
                                <option value="4">ุงููุฑูุฉ ุงูุฑุงุจุนุฉ</option>
                            </select>
                            <i class="fa-solid fa-chevron-down select-arrow"></i>
                        </div>

                        <label style="display:block; margin-bottom:5px; font-weight:bold; color:#1e293b;">
                            ุงุณู ุงููุงุฏุฉ:
                        </label>

                        <div style="position: relative; margin-bottom:20px;">
                            <!-- ุญูู ุงูุฅุฏุฎุงู -->
                            <input type="text" id="archiveSubjectInput" class="modern-input" list="subjectsList"
                                placeholder="ุงูุชุจ ููุจุญุซ (ุฃ = ุง)..." style="width:100%;" oninput="smartSubjectSearch()"
                                onfocus="smartSubjectSearch()">

                            <!-- โ ูุฐุง ูู ุงูุณุทุฑ ุงูุฐู ูุงู ูุงูุตุงู ููุณุจุจ ุงูุฎุทุฃ ูู ุงููููุณูู -->
                            <datalist id="subjectsList"></datalist>

                            <!-- ุตูุฏูู ุงูุงูุชุฑุงุญุงุช ุงููุฎุตุต (ููุจุญุซ ุงูุฐูู) -->
                            <div id="suggestionBox"
                                style="display:none; position:absolute; top:100%; left:0; right:0; background:white; border:1px solid #cbd5e1; border-radius:0 0 8px 8px; max-height:150px; overflow-y:auto; z-index:1000; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);">
                            </div>
                        </div>

                        <button onclick="downloadHistoricalSheet()" class="btn-main"
                            style="background: linear-gradient(135deg, #0ea5e9, #0284c7);">
                            ุชุญููู ุงูุณุฌู <i class="fa-solid fa-cloud-arrow-down"></i>
                        </button>

                    </div>
                </div>
            </div>

            <!-- ุณุชุงูู ุจุณูุท ููุชุจุฏูู ุจูู ุงููููู ูุงูุฃุณุจูุนู -->
            <style>
                input[name="reportType"]:checked+label {
                    background: #fff;
                    color: #0ea5e9;
                    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
                }

                input[name="reportType"]:not(:checked)+label {
                    color: #64748b;
                }
            </style>
            <div id="secureLoginModal" class="modal-overlay">
                <div class="modal-box" style="max-width: 400px;">
                    <div class="report-modal-header">
                        <div class="modal-title" data-i18n="admin_login_title">๐ ุฏุฎูู ุงููุดุฑููู</div>
                        <button onclick="document.getElementById('secureLoginModal').style.display='none'"
                            class="btn-close-stylish" data-i18n="close_btn">ุฅุบูุงู</button>
                    </div>

                    <div style="padding: 20px;">
                        <label style="display:block; margin-bottom:5px; font-weight:bold;"
                            data-i18n="email_label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุงูููุญุฏ:</label>
                        <input type="email" id="adminEmail" class="modern-input"
                            data-i18n-placeholder="email_placeholder" placeholder="admin@nursing.com"
                            style="width:100%; margin-bottom:15px; direction:ltr;">

                        <label style="display:block; margin-bottom:5px; font-weight:bold;"
                            data-i18n="password_label">ูููุฉ ุงููุฑูุฑ:</label>
                        <input type="password" id="adminPass" class="modern-input"
                            data-i18n-placeholder="password_placeholder" placeholder="********"
                            style="width:100%; margin-bottom:20px; direction:ltr;">

                        <button onclick="performSecureLogin()" class="btn-main" style="width:100%;"
                            data-i18n="login_btn">ุชุณุฌูู ุงูุฏุฎูู</button>
                    </div>
                </div>
            </div>
            <div id="sessionTimeModal" class="modal-overlay" style="z-index: 9999999;">
                <div class="modal-box" style="width: 90%; max-width: 350px; padding: 20px;">
                    <div class="modal-title" style="margin-bottom: 15px;" data-i18n="choose_duration_title">โฑ๏ธ ุงุฎุชุฑ
                        ูุฏุฉ
                        ุงูุฌูุณุฉ</div>

                    <div class="time-grid-modern">
                        <button onclick="confirmSessionStart(10)" class="time-btn" data-i18n="time_10s">10
                            ุซูุงูู</button>
                        <button onclick="confirmSessionStart(20)" class="time-btn" data-i18n="time_20s">20
                            ุซุงููุฉ</button>
                        <button onclick="confirmSessionStart(30)" class="time-btn" data-i18n="time_30s">30
                            ุซุงููุฉ</button>
                        <button onclick="confirmSessionStart(40)" class="time-btn" data-i18n="time_40s">40
                            ุซุงููุฉ</button>
                        <button onclick="confirmSessionStart(50)" class="time-btn" data-i18n="time_50s">50
                            ุซุงููุฉ</button>
                        <button onclick="confirmSessionStart(60)" class="time-btn" data-i18n="time_1m">1
                            ุฏูููุฉ</button>
                        <button onclick="confirmSessionStart(120)" class="time-btn" data-i18n="time_2m">2
                            ุฏูููุฉ</button>
                        <button onclick="confirmSessionStart(-1)" class="time-btn open-time"
                            data-i18n="open_time_btn">๐ ููุช ููุชูุญ</button>
                    </div>

                    <button onclick="document.getElementById('sessionTimeModal').style.display='none'"
                        class="btn-cancel-modern" style="margin-top: 15px; width: 100%;"
                        data-i18n="cancel_btn">ุฅูุบุงุก</button>
                </div>
            </div>

            <style>
                /* ุชูุณููุงุช ุงููุงูุฐุฉ ุงูููุฏุฑู */
                .time-grid-modern {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 10px;
                }

                .time-btn {
                    background: #f1f5f9;
                    border: 1px solid #cbd5e1;
                    border-radius: 8px;
                    padding: 12px;
                    font-weight: bold;
                    color: #334155;
                    cursor: pointer;
                    transition: 0.2s;
                }

                .time-btn:active {
                    transform: scale(0.95);
                }

                .time-btn.open-time {
                    grid-column: span 2;
                    background: #dcfce7;
                    color: #166534;
                    border-color: #86efac;
                }
            </style>
            <!-- [ุชุนุฏูู ูุงูุฐุฉ ุฅุนุฏุงุฏุงุช ุงูุฌูุณุฉ - ุฅุถุงูุฉ ุงูุฌุฑูุจ ูุฅูุบุงุก ุงููุฏุฉ] -->
            <div id="customTimeModal" class="sys-modal-overlay" style="display: none;">
                <div class="sys-modal-box live-config-box" style="max-width: 400px;">
                    <div class="sys-modal-header" style="justify-content: center; gap: 15px;">
                        <div class="header-icon-bg" style="background: #0ea5e9;"><i class="fa-solid fa-chalkboard-user"
                                style="color: white;"></i></div>
                        <h3 style="margin: 0;" data-i18n="setup_lecture_title">ุฅุนุฏุงุฏ ุงููุญุงุถุฑุฉ ุงูุญุงููุฉ</h3>
                    </div>

                    <div style="max-height: 480px; overflow-y: auto; padding: 10px; margin-top: 10px; direction: rtl;">
                        <div style="margin-bottom: 15px; text-align: right;">
                            <label
                                style="font-size: 12px; font-weight: 800; color: #64748b; display: block; margin-bottom: 5px;"
                                data-i18n="setup_subject_label">1. ุงููุงุฏุฉ ุงูุนูููุฉ:</label>
                            <input type="text" id="subjectSearchInput" class="modern-input"
                                placeholder="๐ ุงุจุญุซ ุนู ุงููุงุฏุฉ..." oninput="filterModalSubjects()">
                            <select id="modalSubjectSelect" class="modern-input" size="3"
                                style="margin-top:5px;"></select>
                        </div>

                        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                            <div style="flex: 1; text-align: right;">
                                <label
                                    style="font-size: 11px; font-weight: 800; color: #64748b; display: block; margin-bottom: 5px;"
                                    data-i18n="setup_hall_label">2. ุงููุงุนุฉ:</label>
                                <select id="modalHallSelect" class="modern-input"></select>
                            </div>
                            <div style="flex: 1; text-align: right;">
                                <label
                                    style="font-size: 11px; font-weight: 800; color: #64748b; display: block; margin-bottom: 5px;"
                                    data-i18n="setup_group_label">3. ุงููุฌููุนุฉ (ุงูุฌุฑูุจ):</label>
                                <input type="text" id="modalGroupInput" class="modern-input"
                                    data-i18n-placeholder="group_placeholder" placeholder="ูุซูุงู: G1"
                                    style="text-align: center; text-transform: uppercase;">
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                            <div style="flex: 1; text-align: right;">
                                <label
                                    style="font-size: 11px; font-weight: 800; color: #64748b; display: block; margin-bottom: 5px;"
                                    data-i18n="session_pass_label">ูููุฉ ุณุฑ ุงูุฌูุณุฉ:</label>
                                <input type="text" id="modalSessionPassInput" class="modern-input"
                                    data-i18n-placeholder="optional_placeholder" placeholder="ุงุฎุชูุงุฑู"
                                    style="text-align: center;">
                            </div>
                            <div style="flex: 1; text-align: right;">
                                <label
                                    style="font-size: 11px; font-weight: 800; color: #64748b; display: block; margin-bottom: 5px;"
                                    data-i18n="max_students_label">ุญุฏ ุงูุทูุงุจ:</label>
                                <input type="number" id="modalMaxStudents" class="modern-input"
                                    data-i18n-placeholder="no_limit_placeholder" placeholder="ุจุฏูู ุญุฏ"
                                    style="text-align: center;">
                            </div>
                        </div>

                        <button onclick="confirmSessionStart()" class="btn-main"
                            style="background: #0ea5e9; box-shadow: 0 8px 20px rgba(14, 165, 233, 0.3);">
                            <span data-i18n="start_setup_btn">ุจุฏุก ุงููุญุงุถุฑุฉ (ุชุฌููุฒ)</span> <i
                                class="fa-solid fa-play"></i>
                        </button>
                    </div>
                    <button onclick="document.getElementById('customTimeModal').style.display='none'"
                        class="sys-close-btn" data-i18n="cancel_btn">ุฅูุบุงุก</button>
                </div>
            </div>
            <div id="studentPassModal" class="modal-overlay" style="z-index: 99999999;">
                <div class="modal-box">
                    <i class="fa-solid fa-key" style="font-size: 40px; color: #f59e0b; margin-bottom: 15px;"></i>
                    <div class="modal-title" style="color: #1e293b;" data-i18n="session_password_title">ูููุฉ ุณุฑ
                        ุงูุฌูุณุฉ
                    </div>
                    <div class="modal-text" data-i18n="session_protected_msg">ูุฐู ุงูุฌูุณุฉ ูุญููุฉ ุจูููุฉ ูุฑูุฑ. ูุฑุฌู
                        ุฅุฏุฎุงููุง
                        ูููุชุงุจุนุฉ.</div>

                    <input type="text" id="studentEnteredPass" class="modern-input"
                        data-i18n-placeholder="enter_code_placeholder" placeholder="ุงูุชุจ ุงูุฑูุฒ ููุง"
                        style="text-align: center; font-size: 20px; letter-spacing: 3px; font-weight: bold; margin-bottom: 15px;">

                    <button onclick="verifyAndSubmit()" class="btn-main" style="background: #0ea5e9;">
                        <span data-i18n="confirm_btn">ุชุฃููุฏ</span> <i class="fa-solid fa-check"></i>
                    </button>
                </div>
            </div>
            <div id="studentFloatingTimer" class="floating-timer" style="display: none;">
                <div class="timer-icon-pulse">
                    <i class="fa-solid fa-hourglass-half"></i>
                </div>
                <span id="floatingTimeText" class="en-font">00</span>
            </div>
            <div id="quickModeOptionsModal" class="modal-overlay" style="z-index: 999999; display: none;">
                <div class="modal-box">
                    <div class="modal-title" style="color: #ea580c; display: flex; align-items: center; gap: 10px;">
                        <i class="fa-solid fa-sliders"></i> ุชุฎุตูุต ุงููููุฏ
                    </div>
                    <p style="color: #64748b; font-size: 13px; margin-bottom: 20px;">
                        ุญุฏุฏ ุงููููุฏ ุงูุชู ุชุฑูุฏ <b>ุชุนุทูููุง (ุฅูุบุงุกูุง)</b> ูุชุณููู ุฏุฎูู ุงูุทูุงุจ:
                    </p>

                    <div class="options-list" style="text-align: right;">
                        <label class="option-row"
                            style="display: flex; align-items: center; justify-content: space-between; padding: 15px; border: 1px solid #e2e8f0; border-radius: 10px; margin-bottom: 10px; cursor: pointer;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <i class="fa-solid fa-location-slash" style="color: #0ea5e9;"></i>
                                <span style="font-weight: bold; color: #334155;">ุฅูุบุงุก ุงููููุน (GPS)</span>
                            </div>
                            <input type="checkbox" id="chkDisableGPS"
                                style="width: 20px; height: 20px; accent-color: #ea580c;">
                        </label>

                        <label class="option-row"
                            style="display: flex; align-items: center; justify-content: space-between; padding: 15px; border: 1px solid #e2e8f0; border-radius: 10px; margin-bottom: 10px; cursor: pointer;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <i class="fa-solid fa-user-slash" style="color: #8b5cf6;"></i>
                                <span style="font-weight: bold; color: #334155;">ุฅูุบุงุก ุจุตูุฉ ุงููุฌู</span>
                            </div>
                            <input type="checkbox" id="chkDisableFace"
                                style="width: 20px; height: 20px; accent-color: #ea580c;">
                        </label>

                        <label class="option-row"
                            style="display: flex; align-items: center; justify-content: space-between; padding: 15px; border: 1px solid #e2e8f0; border-radius: 10px; margin-bottom: 10px; cursor: pointer;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <i class="fa-solid fa-qrcode" style="color: #10b981;"></i>
                                <span style="font-weight: bold; color: #334155;" data-i18n="disable_qr_label">ุฅูุบุงุก
                                    ููุฏ
                                    QR</span>
                            </div>
                            <input type="checkbox" id="chkDisableQR"
                                style="width: 20px; height: 20px; accent-color: #ea580c;">
                        </label>
                    </div>

                    <div class="modal-actions"
                        style="margin-top: 20px; display: flex; flex-direction: column; gap: 10px;">
                        <button onclick="confirmQuickModeParams()" class="btn-main"
                            style="background: #ea580c; width: 100%;" data-i18n="activate_selected_btn">ุชูุนูู ุงููุญุฏุฏ
                            โ</button>
                        <button onclick="disableQuickMode()" class="btn-cancel-modern"
                            style="color: #ef4444; border-color: #fee2e2; background: #fef2f2; width: 100%;"
                            data-i18n="stop_quick_mode_btn">ุฅููุงู ุงููุถุน
                            ุงูุณุฑูุน</button>
                        <button onclick="document.getElementById('quickModeOptionsModal').style.display='none'"
                            class="btn-cancel-modern" style="width: 100%;" data-i18n="close_btn">ุฅุบูุงู</button>
                    </div>
                </div>
            </div>
            <div id="studentAuthDrawer" class="auth-drawer-overlay"
                onclick="if(event.target == this) closeAuthDrawer()">
                <div class="auth-drawer-content modern-glass">

                    <button onclick="closeAuthDrawer()" class="close-btn-modern" aria-label="Close">
                        <i class="fa-solid fa-xmark"></i>
                    </button>

                    <div class="header-content-center">
                        <h2 id="authTitle" class="auth-main-title">Welcome Back</h2>
                        <p id="authSubtitle" class="auth-sub-title">Please enter your details to continue</p>
                    </div>

                    <div class="drawer-body">

                        <div id="loginSection" class="auth-section active">
                            <div class="floating-group">
                                <i class="fa-solid fa-envelope icon-inside"></i>
                                <input type="email" id="studentLoginEmail" class="floating-input" placeholder=" "
                                    required>
                                <label class="floating-label">University Email</label>
                            </div>
                            <!-- ูุณู ุงูุจุงุณูุฑุฏ ูู ุชุณุฌูู ุงูุฏุฎูู -->
                            <div class="floating-group">
                                <i class="fa-solid fa-lock icon-inside"></i>
                                <input type="password" id="studentLoginPass" class="floating-input" placeholder=" "
                                    required>
                                <label class="floating-label">Password</label>
                                <!-- ุฃุถู ุงูุณุทุฑ ุงูุชุงูู ููุง -->
                                <i class="fa-solid fa-eye eye-toggle"
                                    onclick="togglePass('studentLoginPass', this)"></i>
                            </div>
                            <button onclick="performStudentLogin()" class="btn-modern-action">Sign In</button>
                            <p class="switch-link-center">New student? <a href="javascript:void(0)"
                                    onclick="toggleAuthMode('signup')">Create Account</a></p>
                        </div>

                        <div id="signupSection" class="auth-section">
                            <div class="floating-group">
                                <i class="fa-solid fa-id-card icon-inside"></i>
                                <input type="number" id="regStudentID" class="floating-input" placeholder=" "
                                    oninput="autoFetchName(this.value)" required>
                                <label class="floating-label">University ID</label>
                            </div>

                            <div class="floating-group">
                                <i class="fa-solid fa-user-graduate icon-inside"></i>
                                <input type="text" id="regFullName" class="floating-input readonly-input"
                                    placeholder=" " readonly>
                                <label class="floating-label">Full Name</label>
                                <div id="nameLoader" class="loader-inside"><i
                                        class="fa-solid fa-circle-notch fa-spin"></i>
                                </div>
                            </div>

                            <div class="form-row-pro">
                                <div class="floating-group custom-dropdown icon-only-dropdown" id="dropdownLevel">
                                    <div class="custom-select-display" onclick="toggleDropdown('listLevel')">
                                        <i class="fa-solid fa-graduation-cap icon-main"></i>
                                        <i class="fa-solid fa-caret-down mini-arrow"></i>
                                    </div>
                                    <ul class="dropdown-list" id="listLevel">
                                        <li onclick="selectOption('Level', '1', '1st Year')">First Year (1st)
                                        </li>
                                        <li onclick="selectOption('Level', '2', '2nd Year')">Second Year (2nd)
                                        </li>
                                        <li onclick="selectOption('Level', '3', '3rd Year')">Third Year (3rd)
                                        </li>
                                        <li onclick="selectOption('Level', '4', '4th Year')">Fourth Year (4th)
                                        </li>
                                    </ul>
                                    <input type="hidden" id="regLevel" value="">
                                </div>

                                <div class="floating-group custom-dropdown icon-only-dropdown" id="dropdownGender">
                                    <div class="custom-select-display" onclick="toggleDropdown('listGender')">
                                        <i class="fa-solid fa-venus-mars icon-main"></i>
                                        <i class="fa-solid fa-caret-down mini-arrow"></i>
                                    </div>
                                    <ul class="dropdown-list" id="listGender">
                                        <li onclick="selectOption('Gender', 'Male', 'Male')">Male</li>
                                        <li onclick="selectOption('Gender', 'Female', 'Female')">Female</li>
                                    </ul>
                                    <input type="hidden" id="regGender" value="">
                                </div>
                            </div>

                            <div class="floating-group">
                                <i class="fa-solid fa-users-rectangle icon-inside"></i>
                                <input type="text" id="regGroup" class="floating-input" placeholder=" " required
                                    oninput="validateSignupForm()">
                                <label class="floating-label">Group (e.g. G12)</label>
                            </div>

                            <div class="floating-group">
                                <i class="fa-solid fa-at icon-inside"></i>
                                <input type="email" id="regEmail" class="floating-input" placeholder=" " required
                                    oninput="validateSignupForm()">
                                <label class="floating-label">University Email</label>
                            </div>
                            <div class="floating-group">
                                <i class="fa-solid fa-envelope-circle-check icon-inside"></i>
                                <input type="email" id="regEmailConfirm" class="floating-input" placeholder=" " required
                                    oninput="validateSignupForm()">
                                <label class="floating-label">Confirm Email</label>
                                <small id="emailError" class="error-text">Emails do not match!</small>
                            </div>

                            <div class="floating-group">
                                <i class="fa-solid fa-key icon-inside"></i>
                                <input type="password" id="regPass" class="floating-input" placeholder=" " required
                                    oninput="validateSignupForm()">
                                <label class="floating-label">Password</label>
                                <i class="fa-solid fa-eye eye-toggle" onclick="togglePass('regPass', this)"></i>
                            </div>
                            <div class="floating-group">
                                <i class="fa-solid fa-shield-halved icon-inside"></i>
                                <input type="password" id="regPassConfirm" class="floating-input" placeholder=" "
                                    required oninput="validateSignupForm()">
                                <label class="floating-label">Confirm Password</label>
                                <i class="fa-solid fa-eye eye-toggle" onclick="togglePass('regPassConfirm', this)"></i>
                                <small id="passError" class="error-text">Passwords do not match!</small>
                            </div>

                            <button id="btnDoSignup" onclick="performStudentSignup()"
                                class="btn-modern-action signup-color" disabled>REGISTER & VERIFY</button>

                            <p class="switch-link-center">Already registered? <a href="javascript:void(0)"
                                    onclick="toggleAuthMode('login')">Sign In</a></p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- [ูุงูุฐุฉ ุงูุจุฑููุงูู ุงูุดุฎุตู ููุทุงูุจ + ุชุนุฏูู ุงูุญุงูุฉ] -->
            <!-- [ูุงูุฐุฉ ุงูุจุฑููุงูู ุงูุดุฎุตู ููุทุงูุจ + ุชุนุฏูู ุงูุญุงูุฉ] -->
            <div id="studentProfileModal" class="profile-overlay">
                <div class="pro-card">

                    <!-- ุงูููุฏุฑ: ุฒุฑ ุงูุฅุบูุงู -->
                    <div class="card-header-bg">
                        <button
                            onclick="document.getElementById('infoBtn').style.display='flex'; document.getElementById('studentProfileModal').classList.remove('active'); setTimeout(()=>document.getElementById('studentProfileModal').style.display='none', 300);"
                            class="btn-close-pro">
                            <i class="fa-solid fa-xmark"></i>
                        </button>
                    </div>

                    <!-- ุตูุฑุฉ ุงูุจุฑููุงูู -->
                    <div class="avatar-wrapper" onclick="openAvatarSelector()">
                        <div id="currentAvatar" class="pro-avatar">
                            <i class="fa-solid fa-user"></i>
                        </div>
                        <div class="edit-badge">
                            <i class="fa-solid fa-pen"></i>
                        </div>
                    </div>

                    <!-- ุงูุงุณู ูุงูุฑุชุจุฉ -->
                    <h2 id="profFullName" class="pro-name" data-i18n="loading_user">ุฌุงุฑู ุงูุชุญููู...</h2>
                    <p class="pro-role" data-i18n="student_role">ุทุงูุจ ุชูุฑูุถ</p>

                    <!-- ๐ฅ [ุงูุชุนุฏูู ููุง] ุฎุงูุฉ ุงูุญุงูุฉ ุจุงุณู ID ุฌุฏูุฏ (studentStatusInput) -->
                    <div class="status-edit-container">
                        <div class="input-with-icon">
                            <i class="fa-solid fa-pen-nib"></i>
                            <!-- ๐๐ ูุงุญุธ ุงูุงุณู ุงูุฌุฏูุฏ ููุง ๐๐ -->
                            <input type="text" id="studentStatusInput" maxlength="50"
                                placeholder="ุงูุชุจ ุญุงูุฉ ุฃู ุฅูููุฌู ๐...">
                        </div>
                        <button onclick="saveMyStatus()" class="btn-save-status" style="background: #10b981;">
                            <i class="fa-solid fa-check"></i>
                        </button>
                        <button onclick="deleteMyStatus()" class="btn-save-status"
                            style="background: #fee2e2; color: #ef4444;">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </div>

                    <!-- ุดุจูุฉ ุงููุนูููุงุช -->
                    <div class="info-grid">
                        <div class="info-card">
                            <div class="info-icon-box bg-blue">
                                <i class="fa-solid fa-layer-group"></i>
                            </div>
                            <div>
                                <div class="info-label" data-i18n="academic_level_label">ุงููุณุชูู ุงูุฃูุงุฏููู</div>
                                <div id="profLevel" class="info-value">--</div>
                            </div>
                        </div>

                        <div class="info-card">
                            <div class="info-icon-box bg-purple">
                                <i class="fa-solid fa-venus-mars"></i>
                            </div>
                            <div>
                                <div class="info-label" data-i18n="gender_label">ุงูููุน</div>
                                <div id="profGender" class="info-value">--</div>
                            </div>
                        </div>

                        <div class="info-card full-width">
                            <div style="display:flex; align-items:center; gap:12px;">
                                <div class="info-icon-box bg-green" style="margin:0;">
                                    <i class="fa-solid fa-id-card"></i>
                                </div>
                                <div>
                                    <div class="info-label" data-i18n="university_id_label">ุงูููุฏ ุงูุฌุงูุนู</div>
                                    <div id="profStudentID" class="info-value en-font" style="letter-spacing:1px;">
                                        --
                                    </div>
                                </div>
                            </div>
                            <i class="fa-solid fa-check-circle" style="color:#10b981;"></i>
                        </div>

                        <div class="info-card full-width"
                            style="flex-direction: column; align-items: flex-start; gap: 5px;">
                            <div class="info-label" data-i18n="official_email_label">ุงูุจุฑูุฏ ุงูุฑุณูู</div>
                            <div id="profEmail" class="info-value en-font"
                                style="font-size: 13px; word-break: break-all;">--
                            </div>
                        </div>

                        <div class="info-card full-width"
                            style="background:transparent; border:none; padding:0; box-shadow:none;">
                            <div class="info-label" style="width:100%; text-align:center; opacity:0.5;"
                                data-i18n="system_id_label">ูุนุฑู ุงููุธุงู</div>
                            <div id="profUID" class="info-value en-font"
                                style="width:100%; text-align:center; font-size:10px; color:#94a3b8; font-weight:400;">
                                --</div>
                        </div>
                    </div>

                    <!-- ุฒุฑ ุชุณุฌูู ุงูุฎุฑูุฌ -->
                    <button onclick="performLogout()" class="btn-logout-pro">
                        <span data-i18n="sign_out">ุชุณุฌูู ุงูุฎุฑูุฌ</span> <i
                            class="fa-solid fa-arrow-right-from-bracket"></i>
                    </button>

                </div>
            </div>
            <div id="avatarSelectorModal" class="profile-overlay" style="z-index: 2147483647;">
                <div class="pro-card" style="max-width: 340px; padding-top: 20px;">

                    <h3 class="pro-name" style="font-size: 18px; margin-bottom: 5px;" data-i18n="choose_avatar_title">
                        ุงุฎุชุฑ ุตูุฑุชู ุงูุฑูุฒูุฉ</h3>
                    <p class="pro-role" style="margin-bottom: 20px;" data-i18n="choose_avatar_sub">ุงุฎุชุฑ ุฃููููุฉ ุชูุซูู
                        ูู
                        ุงููุธุงู</p>

                    <div id="avatarsGrid" class="avatars-grid-modern"></div>

                    <button onclick="document.getElementById('avatarSelectorModal').style.display='none'"
                        class="btn-logout-pro" style="background: #f1f5f9; color: #64748b; margin-top: 20px;"
                        data-i18n="cancel_btn">
                        ุฅูุบุงุก
                    </button>
                </div>
            </div>
            <!-- [ุฒุฑ ุงูุจุฑููุงูู ุงูููุญุฏ - ูุณุฎุฉ ูุงุญุฏุฉ ููุท] -->
            <div id="unifiedProfileBtn" class="modern-profile-trigger" onclick="handleProfileIconClick()">
                <div class="profile-glow-ring"></div>
                <div class="profile-inner-container" id="profileIconWrapper">
                    <i class="fa-solid fa-user-astronaut" id="profileIconImg"></i>
                    <div class="status-indicator" id="userStatusDot"></div>
                </div>
            </div>
            <style>
                #facultyProfileBtn {
                    background: none !important;
                    border: none !important;
                    box-shadow: none !important;
                    padding: 0 !important;
                    /* ุชูุจูุฑ ุงูุญุงููุฉ ุงูุฎุงุฑุฌูุฉ */
                    width: 80px !important;
                    height: 80px !important;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 9999;
                }

                #facultyProfileBtn .trigger-avatar-wrapper {
                    /* ุชูุจูุฑ ุงูุฏุงุฆุฑุฉ ุงูุฒุฑูุงุก */
                    width: 65px !important;
                    height: 65px !important;
                    background: linear-gradient(135deg, #0ea5e9, #0284c7);
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    border: 3px solid #fff;
                    /* ุฒูุงุฏุฉ ุณูู ุงูุฅุทุงุฑ ุงูุฃุจูุถ */
                    box-shadow: 0 6px 20px rgba(14, 165, 233, 0.4);
                    position: relative;
                    transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                }

                /* ุชูุจูุฑ ุญุฌู ุฃููููุฉ ุงูุฏูุชูุฑ */
                #facultyProfileBtn .trigger-avatar-wrapper i {
                    color: white !important;
                    font-size: 30px !important;
                }

                /* ุฅูุบุงุก ุงูููุทุฉ ุงูุฎุถุฑุงุก ุชูุงูุงู */
                #facultyProfileBtn::after {
                    display: none !important;
                    content: none !important;
                }

                /* ุชุฃุซูุฑ ุนูุฏ ุงูุถุบุท */
                #facultyProfileBtn:active .trigger-avatar-wrapper {
                    transform: scale(0.9);
                }
            </style>

            <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

</body>

</html>
<style>
    /* --- Premium Glassmorphism & Notch Labels --- */
    .faculty-modal.modal-overlay {
        background: rgba(15, 23, 42, 0.5);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        display: none;
        align-items: center;
        justify-content: center;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 999999;
    }

    .faculty-modal .modal-box {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(30px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 40px 80px rgba(0, 0, 0, 0.4);
        border-radius: 25px;
        width: 95%;
        max-width: 450px;
        color: #fff;
    }

    /* Floating Label "On the Border" */
    .input-group {
        position: relative;
        margin-bottom: 22px;
        width: 100%;
    }

    .modern-input {
        width: 100% !important;
        background: transparent !important;
        border: 1.5px solid rgba(255, 255, 255, 0.3) !important;
        padding: 15px 18px;
        border-radius: 12px;
        color: #fff !important;
        outline: none;
        box-sizing: border-box;
        font-size: 14px;
        transition: all 0.3s ease;
    }

    /* --- [ุชุนุฏูู ุฃุณุงุณู] ุญูู ูููุฉ ุงูุณุฑ ูููุน ุงูุชุฏุงุฎู ูุน ุงูุนูู --- */
    .modern-input-pass {
        padding-right: 55px !important;
        /* ูุณุงุญุฉ ุฅุฌุจุงุฑูุฉ ุชููุน ุงูููุงุท ูู ุงููุตูู ููุนูู */
    }

    .input-group label {
        position: absolute;
        top: 50%;
        left: 15px;
        transform: translateY(-50%);
        font-size: 14px;
        color: rgba(255, 255, 255, 0.6);
        pointer-events: none;
        transition: all 0.2s ease;
        padding: 0 8px;
        background: transparent;
    }

    /* ุงูุญุงูุฉ ุนูุฏ ุงูุถุบุท ุฃู ุงููุชุงุจุฉ: ุงูุนููุงู ูุฌูุณ ุนูู ุงูุฎุท */
    .modern-input:focus~label,
    .modern-input:not(:placeholder-shown)~label,
    .input-group.has-value label {
        top: 0;
        font-size: 12px;
        color: #fff;
        font-weight: 600;
        background: #2e384d;
        /* ููู ุฎูููุฉ ุงููุงูุฐุฉ ููุต ุงูุฎุท ุงูุนููู */
        border-radius: 4px;
    }

    .modern-input:focus {
        border-color: #fff !important;
        box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.05);
    }

    /* ุชุฌููู ุงูููุงุฆู ุงูููุณุฏูุฉ */
    select.modern-input option {
        background: #1e293b;
        color: #fff;
    }

    /* ุฃููููุฉ ุงูุนูู - ุถุจุท ุงูุชูุณูุท ุงูุฏููู */
    .password-wrapper {
        position: relative;
        width: 100%;
    }

    .toggle-eye {
        position: absolute;
        right: 18px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        color: rgba(255, 255, 255, 0.5);
        z-index: 20;
        font-size: 18px;
        display: flex;
        align-items: center;
        height: 100%;
    }

    /* --- [ุชุนุฏูู ุฃุณุงุณู] ุชูุณูู ุงููุงุณุชุฑ ููุฏ ููููู ุธุงูุฑุงู ููุงุถุญุงู --- */
    #facMasterKey {
        text-align: center;
        letter-spacing: 2px;
        font-weight: 800;
        background: rgba(255, 255, 255, 0.1) !important;
        border: 1.5px dashed rgba(255, 255, 255, 0.4) !important;
        color: #fff !important;
        text-transform: uppercase;
    }

    .glass-btn-submit {
        width: 100%;
        height: 55px;
        background: #fff;
        color: #0f172a;
        border: none;
        border-radius: 15px;
        font-weight: 800;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        transition: 0.3s;
    }

    .signup-scroll-area {
        max-height: 480px;
        overflow-y: auto;
        padding: 10px 5px;
    }
</style>

<div id="facultyGateModal" class="modal-overlay faculty-modal">
    <div class="modal-box">

        <div style="display: flex; border-bottom: 1px solid rgba(255,255,255,0.1);">
            <button id="tabLogin" onclick="switchFacultyTab('login')" class="faculty-tab active"
                style="flex:1; border:none; padding:20px; background:transparent; color:#fff; font-weight:bold; cursor:pointer;">LOGIN</button>
            <button id="tabSignup" onclick="switchFacultyTab('signup')" class="faculty-tab"
                style="flex:1; border:none; padding:20px; background:transparent; color:rgba(255,255,255,0.5); cursor:pointer;">REGISTER</button>
        </div>

        <div style="padding: 30px;">
            <div id="facultySignupSection" style="display: none;">
                <div class="signup-scroll-area">
                    <div class="input-group">
                        <input type="text" id="facName" class="modern-input" placeholder=" ">
                        <label>Full Name (Triple)</label>
                    </div>

                    <div class="input-group has-value">
                        <select id="facRole" class="modern-input">
                            <option value="doctor">Faculty Member / Doctor</option>
                            <option value="dean">Vice Dean / Dean</option>
                        </select>
                        <label>Position / Role</label>
                    </div>

                    <div class="input-group has-value">
                        <select id="facGender" class="modern-input">
                            <option value="" disabled selected>Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                        <label>Gender</label>
                    </div>

                    <div class="input-group">
                        <input type="text" id="facSubject" class="modern-input" placeholder=" ">
                        <label>Academic Subject</label>
                    </div>

                    <div class="input-group">
                        <input type="email" id="facEmail" class="modern-input" placeholder=" ">
                        <label>Email Address</label>
                    </div>

                    <div class="input-group">
                        <input type="email" id="facEmailConfirm" class="modern-input" placeholder=" ">
                        <label>Confirm Email</label>
                    </div>

                    <div class="input-group password-wrapper">
                        <input type="password" id="facPass" class="modern-input modern-input-pass" placeholder=" ">
                        <label>Password</label>
                        <i class="fa-solid fa-eye toggle-eye" onclick="togglePasswordVisibility('facPass', this)"></i>
                    </div>

                    <div class="input-group password-wrapper">
                        <input type="password" id="facPassConfirm" class="modern-input modern-input-pass"
                            placeholder=" ">
                        <label>Confirm Password</label>
                        <i class="fa-solid fa-eye toggle-eye"
                            onclick="togglePasswordVisibility('facPassConfirm', this)"></i>
                    </div>

                    <div
                        style="background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 20px; border: 1.5px dashed rgba(255,255,255,0.2);">
                        <div class="input-group" style="margin-bottom: 0;">
                            <input type="text" id="facMasterKey" class="modern-input" placeholder=" "
                                autocomplete="off">
                            <label
                                style="left: 50%; transform: translate(-50%, -50%); width: 100%; text-align: center;">Master
                                Key (Authorization Code)</label>
                        </div>
                    </div>
                </div>

                <button onclick="performFacultySignup()" class="glass-btn-submit" style="margin-top: 25px;">
                    <i class="fa-solid fa-user-plus"></i> CREATE ACCOUNT
                </button>
            </div>

            <div id="facultyLoginSection">
                <div class="input-group">
                    <input type="email" id="facLoginEmail" class="modern-input" placeholder=" ">
                    <label>Email Address</label>
                </div>
                <div class="input-group password-wrapper">
                    <input type="password" id="facLoginPass" class="modern-input modern-input-pass" placeholder=" ">
                    <label>Password</label>
                    <i class="fa-solid fa-eye toggle-eye" onclick="togglePasswordVisibility('facLoginPass', this)"></i>
                </div>
                <button onclick="performFacultyLogin()" class="glass-btn-submit">
                    SIGN IN <i class="fa-solid fa-lock-open"></i>
                </button>
            </div>
        </div>

        <button onclick="document.getElementById('facultyGateModal').style.display='none'"
            style="width:100%; background:transparent; border:none; color:rgba(255,255,255,0.4); padding:20px; cursor:pointer; font-size:12px;">DISMISS</button>
    </div>
</div>

<style>
    .fac-tab {
        flex: 1;
        padding: 15px;
        border: none;
        background: none;
        font-weight: 800;
        color: #94a3b8;
        cursor: pointer;
        transition: 0.3s;
        font-family: 'Cairo', sans-serif;
    }

    .fac-tab.active {
        color: #0f172a;
        border-bottom: 3px solid #0f172a;
        background: white;
    }

    .modern-input:focus {
        border-color: #0f172a;
        box-shadow: 0 0 0 3px rgba(15, 23, 42, 0.1);
    }

    /* ุฅุตูุงุญ ุดูุงููุฉ ุงููุตูุต ูู ูุงูุฐุฉ ุฅุนุฏุงุฏุงุช ุงูุฌูุณุฉ */
    #customTimeModal .modern-input {
        background-color: #ffffff !important;
        /* ุฎูููุฉ ุจูุถุงุก ุตุฑูุญุฉ */
        color: #1e293b !important;
        /* ูุต ูุญูู ุบุงูู ุฌุฏุงู ูููุฑุงุกุฉ */
        border: 1.5px solid #cbd5e1 !important;
        /* ุฅุทุงุฑ ุฑูุงุฏู ูุงุถุญ */
        padding: 12px !important;
    }

    /* ุฅุตูุงุญ ููู ุงููุต ุฏุงุฎู ุงูููุงุฆู ุงูููุณุฏูุฉ (ุงููุฏุฑุฌ ูุงููุงุฏุฉ) */
    #modalSubjectSelect,
    #modalHallSelect {
        color: #1e293b !important;
        font-weight: 700 !important;
    }

    /* ุฅุตูุงุญ ุธููุฑ ุงููุต ุฃุซูุงุก ุงููุชุงุจุฉ ูู ูููุฉ ุงูุณุฑ ูุงูุนุฏุฏ */
    #modalSessionPassInput,
    #modalMaxStudents {
        color: #0f172a !important;
        background: #f8fafc !important;
    }

    /* ุชูุณูู ุงูุฎูุงุฑุงุช ุฏุงุฎู ุงูุณููุช ูุถูุงู ุธููุฑูุง ูู ูู ุงูููุงุชู */
    #customTimeModal select option {
        color: #1e293b !important;
        background-color: #fff !important;
        padding: 10px;
    }

    /* ุชุบููุฑ ููู ุงูู Placeholder (ุงููุต ุงูุชูุถูุญู) ููููู ุฑูุงุฏู ูุงุถุญ */
    #customTimeModal .modern-input::placeholder {
        color: #94a3b8 !important;
        opacity: 1;
    }
</style>
<div id="facultyProfileModal" class="modal-overlay faculty-modal" style="z-index: 2147483646;">
    <div class="modal-box" style="max-width: 400px; text-align: center; padding-bottom: 20px;">

        <!-- ุงูููุฏุฑ: ุงูุนููุงู ูุฒุฑ ุงูุฅุบูุงู -->
        <div
            style="padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1);">
            <h3 style="margin: 0; font-size: 18px; letter-spacing: 1px; color: white;">Admin Profile</h3>
            <button onclick="document.getElementById('facultyProfileModal').style.display='none'"
                style="background: none; border: none; color: #fff; cursor: pointer; font-size: 20px;">&times;</button>
        </div>

        <div style="padding: 30px 20px;">
            <!-- ุตูุฑุฉ ุงูุฏูุชูุฑ -->
            <div style="position: relative; display: inline-block; margin-bottom: 20px;">
                <div id="facCurrentAvatar" class="profile-avatar-circle"
                    style="width: 100px; height: 100px; font-size: 45px; border: 3px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff;">
                    <i class="fa-solid fa-user-doctor"></i>
                </div>
                <button onclick="openAvatarSelector('faculty')"
                    style="position: absolute; bottom: 0; right: 0; width: 32px; height: 32px; border-radius: 50%; background: #0ea5e9; border: 2px solid #fff; color: #fff; cursor: pointer; font-size: 14px;">
                    <i class="fa-solid fa-camera"></i>
                </button>
            </div>

            <!-- ุงูุงุณู ูุงูุฑุชุจุฉ -->
            <h2 id="profFacName" style="margin: 0; font-size: 22px; font-weight: 800; color: white;">Loading...</h2>
            <p id="profFacRole"
                style="margin: 5px 0 20px 0; color: rgba(255,255,255,0.6); font-size: 14px; text-transform: uppercase; letter-spacing: 2px;">
                Faculty Member</p>

            <!-- ๐ฅ [ุชู ุงูุชุนุฏูู ููุง] ุชุบููุฑ ID ุฎุงูุฉ ุงูุญุงูุฉ ููุฏูุชูุฑ -->
            <div class="status-edit-container" style="margin-bottom: 25px;">
                <div class="input-with-icon">
                    <i class="fa-solid fa-pen-nib" style="color: rgba(255,255,255,0.7);"></i>
                    <!-- ๐๐ ุงูุงุณู ุงูุฌุฏูุฏ: facultyStatusInput ๐๐ -->
                    <input type="text" id="facultyStatusInput" maxlength="50" placeholder="ุงูุชุจ ุญุงูุฉ ุฃู ุฅูููุฌู..."
                        style="background: rgba(0,0,0,0.25); color: white; border: 1px solid rgba(255,255,255,0.2); padding-right: 35px;">
                </div>
                <button onclick="saveMyStatus()" class="btn-save-status" style="background: white; color: #0f172a;">
                    <i class="fa-solid fa-check"></i>
                </button>
                <button onclick="deleteMyStatus()" class="btn-save-status"
                    style="background: rgba(239, 68, 68, 0.2); color: #ef4444;">
                    <i class="fa-solid fa-trash"></i>
                </button>
            </div>

            <!-- ุชูุงุตูู ุงูุญุณุงุจ -->
            <div
                style="text-align: left; background: rgba(0,0,0,0.2); border-radius: 20px; padding: 15px; border: 1px solid rgba(255,255,255,0.05);">
                <div style="margin-bottom: 15px;">
                    <label
                        style="display: block; font-size: 10px; color: #0ea5e9; font-weight: 800; margin-bottom: 3px; text-transform: uppercase;">
                        Academic Subject
                    </label>
                    <span id="profFacSubject" style="font-size: 15px; font-weight: 600; color: white;">--</span>
                </div>
                <div style="margin-bottom: 15px;">
                    <label
                        style="display: block; font-size: 10px; color: #0ea5e9; font-weight: 800; margin-bottom: 3px; text-transform: uppercase;">
                        Email Address
                    </label>
                    <span id="profFacEmail"
                        style="font-size: 13px; font-family: 'Courier New', Courier, monospace; color: white;">--</span>
                </div>
                <div>
                    <label
                        style="display: block; font-size: 10px; color: #0ea5e9; font-weight: 800; margin-bottom: 3px; text-transform: uppercase;">
                        System ID
                    </label>
                    <span id="profFacUID" style="font-size: 11px; opacity: 0.5; color: white;">--</span>
                </div>
            </div>
        </div>

        <!-- ุฒุฑ ุงูุฎุฑูุฌ -->
        <button onclick="performLogout()"
            style="width: 80%; background: rgba(239, 68, 68, 0.15); color: #ef4444; border: 1px solid #ef4444; padding: 12px; border-radius: 12px; font-weight: 700; cursor: pointer; transition: 0.3s;">
            <i class="fa-solid fa-right-from-bracket"></i> SIGN OUT
        </button>
    </div>
</div>
<style>
    /* 1. Main Container Setup - ุชู ุชุนุฏูู ุงููุญุงุฐุงุฉ ูุงูุจุงุฏููุฌ */
    #screenLiveSession {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #f8fafc;
        z-index: 2147483647;
        display: none;
        flex-direction: column;
        align-items: center;
        /* ุงูุชุนุฏูู ุงูุฌุฑุงุญู: ุฌุนู ุงูุนูุงุตุฑ ุชุจุฏุฃ ูู ุงูุฃุนูู ุจุฏูุงู ูู ุงูุชูุฒูุน ุงููุชุณุงูู */
        justify-content: flex-start !important;
        padding: 10px 10px 0 10px;
        /* ุชูููู ุงููุณุงูุฉ ุงูุนูููุฉ ูู 20 ุฅูู 10 */
        overflow-y: auto;
        pointer-events: auto !important;
        touch-action: auto !important;
    }

    /* ุชูุณูู ุงูุญุงููุฉ ุงูุนูููุฉ - ุชู ุชูููู ุงูุจุงุฏููุฌ */
    .live-top-bar {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 5px 15px;
        /* ุชูููู ุงููุณุงูุฉ ูู 20 ุฅูู 10 */
        background: transparent;
        position: relative;
        z-index: 10;
        margin-bottom: 5px;
        /* ุฅุถุงูุฉ ูุงูุด ุตุบูุฑ ุฌุฏุงู ุชุญุช ุฃุฒุฑุงุฑ ุงูุณูู */
    }

    /* ุชุนุฏูู ุฒุฑ ุงูููู ููููู ุฌุฒุกุงู ูู ุงูุชุตููู */
    .home-floating-btn {
        position: static !important;
        transform: none !important;
        margin: 0 !important;
        width: 45px;
        height: 45px;
        background: #ffffff;
        border-radius: 14px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        border: 1px solid #e2e8f0;
        color: #334155;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .home-floating-btn:active {
        transform: scale(0.9);
    }

    /* Live Status Pill (Top Right) */
    .live-pill {
        background: #fee2e2;
        color: #ef4444;
        padding: 8px 18px;
        border-radius: 30px;
        font-size: 11px;
        font-weight: 800;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        border: 1px solid #fecaca;
        box-shadow: 0 4px 12px rgba(239, 68, 68, 0.1);
        font-family: 'Outfit', sans-serif;
        letter-spacing: 0.5px;
    }

    .pulse {
        width: 8px;
        height: 8px;
        background: #ef4444;
        border-radius: 50%;
        animation: blink 1s infinite;
    }

    @keyframes blink {
        50% {
            opacity: 0.4;
        }
    }

    /* 3. Luxury Wide Card - ุชู ุฅูุบุงุก ุงูู margin-top */
    .royal-card {
        background: #ffffff;
        width: 98%;
        border-radius: 24px;
        box-shadow: 0 20px 60px -10px rgba(14, 165, 233, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.8);
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        margin-top: 0 !important;
        /* ุฅูุบุงุก ุงููุฑุงุบ ููู ุงููุงุฑุช ุงูุฃุจูุถ ุชูุงูุงู */
    }

    .royal-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 6px;
        height: 100%;
        background: linear-gradient(to bottom, #0ea5e9, #3b82f6);
    }

    /* Header: Avatar Left - Info Right */
    .royal-header {
        display: flex;
        flex-direction: row;
        align-items: center;
        padding: 20px;
        /* ุชูููู ุงูุจุงุฏููุฌ ุงูุฏุงุฎูู */
        gap: 15px;
        direction: ltr;
    }

    .royal-avatar-box {
        width: 70px;
        height: 70px;
        background: #f0f9ff;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 35px;
        color: #0284c7;
        border: 2px solid #bae6fd;
        box-shadow: 0 5px 15px rgba(14, 165, 233, 0.15);
        flex-shrink: 0;
    }

    .royal-text {
        text-align: left;
        flex: 1;
    }

    .r-name {
        font-size: 20px;
        font-weight: 900;
        color: #0f172a;
        margin-bottom: 5px;
        display: block;
        font-family: 'Outfit', sans-serif;
    }

    .r-sub {
        font-size: 13px;
        color: #0ea5e9;
        font-weight: 700;
        background: #f0f9ff;
        padding: 5px 15px;
        border-radius: 8px;
        display: inline-block;
        font-family: 'Outfit', sans-serif;
    }

    /* Statistics Row */
    .royal-stats {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        padding: 15px 0;
        background: #fafafa;
        border-top: 1px solid #f1f5f9;
        direction: ltr;
    }

    .r-stat {
        text-align: center;
        border-right: 1px solid #e2e8f0;
    }

    .r-stat:last-child {
        border-right: none;
    }

    .rs-label {
        display: block;
        font-size: 10px;
        color: #94a3b8;
        font-weight: 800;
        margin-bottom: 4px;
        text-transform: uppercase;
    }

    .rs-val {
        font-size: 18px;
        font-weight: 900;
        color: #334155;
        font-family: 'Outfit', sans-serif;
    }

    .rs-val.green {
        color: #10b981;
    }

    .rs-val.blue {
        color: #0ea5e9;
    }

    /* 4. Bottom Sticky Button Area */
    .bottom-action-area {
        width: 100%;
        background: #ffffff;
        padding: 15px 15px 25px 15px;
        border-top: 1px solid #e2e8f0;
        display: flex;
        flex-direction: column;
        /* ุชุฃูุฏ ุฃููุง ุนููุฏูุฉ ููุฃุฒุฑุงุฑ */
        gap: 10px;
        justify-content: center;
        box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.03);
        margin-top: auto;
        /* ุฏูุน ุงูุฃุฒุฑุงุฑ ููุฃุณูู ุฏุงุฆูุงู */
    }

    .btn-end-session-eng {
        background: linear-gradient(135deg, #ef4444, #b91c1c);
        color: white;
        border: none;
        width: 100%;
        padding: 15px;
        border-radius: 18px;
        font-weight: 800;
        font-size: 15px;
        box-shadow: 0 12px 25px rgba(239, 68, 68, 0.3);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        transition: transform 0.2s;
        font-family: 'Outfit', sans-serif;
        text-transform: uppercase;
    }

    .btn-end-session-eng:active {
        transform: scale(0.96);
    }

    .live-students-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(175px, 1fr));
        gap: 15px;
        width: 100%;
        padding: 15px;
        padding-bottom: 50px;
    }

    .action-buttons-row {
        display: flex;
        justify-content: center;
        gap: 8px;
        margin-top: 10px;
        border-top: 1px solid #f1f5f9;
        padding-top: 8px;
        width: 100%;
    }

    .mini-action-btn {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.2s;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    }

    /* ุญุงููุฉ ุงูุจุญุซ ุงูุนุงุฆูุฉ */
    .search-floating-wrapper {
        position: relative;
        width: 95%;
        margin: 10px auto;
        z-index: 5;
    }

    .modern-search-input {
        width: 100%;
        padding: 12px 50px 12px 20px;
        border-radius: 16px;
        border: 1px solid #e2e8f0;
        background: #ffffff;
        font-family: 'Outfit', sans-serif;
        font-size: 14px;
        font-weight: 600;
        color: #1e293b;
        outline: none;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.03);
    }

    .modern-search-input:focus {
        border-color: #0ea5e9;
        box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.1);
    }

    .search-icon-box {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: #94a3b8;
        font-size: 16px;
        pointer-events: none;
    }
</style>

<!-- [ุดุงุดุฉ ุงููุงูู - ูุณุฎุฉ ูุฑูุฒ ุงูููุงุฏุฉ ุงููุทูุฑ - ุญูุงูุฉ ุงูููุฏ] -->
<div id="screenLiveSession" style="display: none;">

    <div class="live-top-bar">
        <div class="live-pill" id="liveStatusPill">
            <span class="pulse"></span>
            <span id="liveStatusText" data-i18n="live_status_active">ุงูุฌูุณุฉ ูุดุทุฉ ุญุงููุงู</span>
        </div>

        <button class="home-floating-btn" onclick="goHome()" title="Exit">
            <i class="fa-solid fa-house"></i>
        </button>
    </div>

    <div
        style="width: 100%; flex: 1; display: flex; flex-direction: column; align-items: center; overflow-y: auto; padding-bottom: 20px;">

        <div class="royal-card">
            <div class="royal-header">
                <div class="royal-avatar-box" id="liveDocAvatar">
                    <i class="fa-solid fa-user-doctor"></i>
                </div>
                <div class="royal-text">
                    <span class="r-name" id="liveDocName" data-i18n="loading_text">ุฌุงุฑู ุงูุชุญููู...</span>
                    <div style="display: flex; gap: 5px; align-items: center; flex-wrap: wrap;">
                        <span class="r-sub" id="liveSubjectTag" data-i18n="subject_label">ุงุณู ุงููุงุฏุฉ</span>
                        <span id="liveGroupTag" onclick="openGroupManager()"
                            style="cursor: pointer; background: #eef2ff; color: #6366f1; padding: 2px 10px; border-radius: 6px; font-size: 11px; font-weight: 800; border: 1px solid #c7d2fe;">
                            ุงููุฌููุนุฉ: --
                        </span>
                    </div>
                    <div id="liveHallTag" style="font-size: 12px; color: #64748b; margin-top: 4px; font-weight: bold;">
                        <i class="fa-solid fa-building-columns"></i> <span data-i18n="hall_label">ุงููุงุนุฉ</span>
                    </div>
                </div>
            </div>

            <div class="royal-stats"
                style="grid-template-columns: repeat(2, 1fr); gap: 10px; padding: 15px; background: #f8fafc;">

                <div class="r-stat"
                    style="border: none; background: white; border-radius: 15px; padding: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.02);">
                    <span class="rs-label" data-i18n="present_count_label">ุงูุญุงุถุฑูู</span>
                    <span id="livePresentCount" class="rs-val green">0</span>
                </div>

                <!-- ๐ช ุจูุงุจุฉ ุงูุฏุฎูู (ุฒุฑ ููุฏูุชูุฑ / ูุคุดุฑ ููุทุงูุจ) -->
                <div class="r-stat" id="doorControlBtn" onclick="openDoorActionModal()"
                    style="cursor: pointer; border: 1.5px dashed #0ea5e9; border-radius: 15px; background: #f0f9ff; padding: 10px; transition: 0.3s;">
                    <span class="rs-label" style="color: #0284c7;" data-i18n="entrance_gate_label">ุจูุงุจุฉ ุงูุฏุฎูู</span>
                    <span id="doorStatusText" class="rs-val blue" style="font-size: 16px;"
                        data-i18n="gate_closed_status">
                        <i class="fa-solid fa-door-closed"></i> ูุบููุฉ
                    </span>
                </div>

                <!-- ๐ ูุฑุจุน ุงูููุฏ (ุณูุฎุชูู ุนูุฏ ุงูุทุงูุจ ุนุจุฑ CSS) -->
                <div class="r-stat" id="codeStatBlock"
                    style="border: none; background: white; border-radius: 15px; padding: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.02);">
                    <span class="rs-label" data-i18n="session_code_label">ููุฏ ุงูุฌูุณุฉ</span>
                    <span id="liveSessionCodeDisplay" class="rs-val" style="letter-spacing: 2px;">------</span>
                </div>

                <div class="r-stat" id="extraStatBlock"
                    style="border: none; background: white; border-radius: 15px; padding: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.02);">
                    <span class="rs-label" data-i18n="extra_count_label">ุฅุถุงูู</span>
                    <span id="liveExtraCount" class="rs-val" style="color: #94a3b8;">0</span>
                </div>
            </div>
        </div>

        <div class="search-floating-wrapper">
            <input type="text" id="liveSearchInput" class="modern-search-input"
                data-i18n-placeholder="live_search_placeholder" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ุงูููุฏ..."
                onkeyup="filterLiveStudents()">
            <div class="search-icon-box">
                <i class="fa-solid fa-magnifying-glass"></i>
            </div>
        </div>

        <div id="liveStudentsGrid" class="live-students-grid" style="width: 100%; padding: 10px;"></div>
    </div>

    <div class="bottom-action-area"
        style="width: 100%; background: #fff; padding: 20px 20px 35px 20px; border-top: 1px solid #e2e8f0; display: flex; flex-direction: column; gap: 10px; position: sticky; bottom: 0; z-index: 100;">
        <button onclick="document.getElementById('manualAddModal').style.display='flex'" class="btn-end-session-eng"
            style="background: linear-gradient(135deg, #10b981, #059669); box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);">
            <i class="fa-solid fa-user-plus"></i> <span data-i18n="manual_add_btn">ุฅุถุงูุฉ ุทุงูุจ ูุฏููุงู</span>
        </button>

        <button id="endSessionBtn" class="btn-end-session-eng" onclick="triggerSessionEndOptions()">
            <i class="fa-solid fa-power-off"></i> <span data-i18n="end_session_btn">ุฅููุงุก ุงูุฌูุณุฉ ูุญูุธ ุงูุบูุงุจ</span>
        </button>
    </div>
</div>
<div id="manualAddModal" class="modal-overlay" style="z-index: 2147483647;">
    <div class="modal-box" style="text-align: center; max-width: 320px; padding: 25px;">

        <div
            style="background: #f0fdf4; width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px auto; border: 1px solid #dcfce7;">
            <i class="fa-solid fa-user-plus" style="font-size: 30px; color: #16a34a;"></i>
        </div>
        <h3 style="color: #1e293b; margin-bottom: 5px; font-weight: 900;" data-i18n="manual_add_title">ุฅุถุงูุฉ ุทุงูุจ ูุฏููุงู
        </h3>

        <div id="manualInputStep">
            <p style="color: #64748b; font-size: 13px; margin-bottom: 20px;" data-i18n="manual_search_hint">ุฃุฏุฎู ููุฏ
                ุงูุทุงูุจ ููุจุญุซ ุนูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.</p>

            <div class="input-group" style="margin-bottom: 15px;">
                <input type="number" id="manualStudentCodeInput" class="modern-input" placeholder=" "
                    style="text-align: center; color: #0f172a !important; border-color: #cbd5e1 !important; font-weight: bold; font-family: 'Outfit', sans-serif;">
                <label style="color: #64748b; left: 50%; transform: translate(-50%, -50%);"
                    data-i18n="student_id_label">ููุฏ ุงูุทุงูุจ (ID)</label>
            </div>

            <button onclick="searchManualStudent()" class="btn-main"
                style="background: #0f172a; width: 100%; margin-bottom: 10px;">
                <span data-i18n="search_btn">ุจุญุซ</span> <i class="fa-solid fa-magnifying-glass"></i>
            </button>
        </div>

        <div id="manualConfirmStep" style="display: none; animation: fadeIn 0.3s;">

            <div
                style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 16px; padding: 15px; margin-bottom: 15px; margin-top: 10px;">
                <div
                    style="width: 60px; height: 60px; border-radius: 50%; background: #fff; border: 2px solid #0ea5e9; margin: 0 auto 10px auto; display: flex; align-items: center; justify-content: center; font-size: 25px; color: #0ea5e9;">
                    <i class="fa-solid fa-user-graduate"></i>
                </div>
                <div id="previewStudentName"
                    style="font-weight: 900; color: #0f172a; font-size: 14px; margin-bottom: 5px;">--</div>
                <div id="previewStudentID" class="en-font"
                    style="font-size: 12px; color: #64748b; background: #e2e8f0; padding: 2px 10px; border-radius: 10px; display: inline-block;">
                    --</div>
            </div>

            <button id="btnConfirmManualAdd" onclick="confirmManualAdd()" class="btn-main"
                style="background: #16a34a; width: 100%; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(22, 163, 74, 0.3);">
                <span data-i18n="confirm_add_btn">ุชุฃููุฏ ุงูุฅุถุงูุฉ</span> <i class="fa-solid fa-check"></i>
            </button>
        </div>

        <button onclick="resetManualModal()" class="btn-cancel-modern" style="width: 100%;"
            data-i18n="cancel_btn">ุฅูุบุงุก</button>
    </div>
</div>
<!-- 1. ูุงูุฐุฉ ุงูุชุฑุญูุจ ุงูููููุฉ ุงูุฐููุฉ -->
<div id="dailyWelcomeModal" class="modal-overlay" style="z-index: 2147483647; display: none;"
    onclick="closeDailyWelcome()">
    <div class="modal-box modern-glass-popup" onclick="event.stopPropagation(); closeDailyWelcome();">
        <div class="welcome-icon-circle"><i class="fa-solid fa-face-smile-beam"></i></div>
        <h2 class="welcome-title"><span data-i18n="hi_text">ุฃููุงู</span>ุ <span id="welcomeUserName">Student</span>! ๐
        </h2>
        <div class="welcome-divider"></div>
        <p class="welcome-text">
            <span data-i18n="glad_here_text">ุณุนุฏุงุก ุจูุฌูุฏู ูุนูุง ุงูููู.</span><br>
            <span data-i18n="better_than_yesterday">ูููู ุฃูุถู ููุง ููุง ุนููู ุจุงูุฃูุณ!</span> โจ
        </p>
        <button onclick="closeDailyWelcome()" class="btn-main welcome-btn" data-i18n="lets_go_btn">ููุง ุจูุง</button>
    </div>
</div>

<!-- 3. ูุงูุฐุฉ ุงูุชุณุฌูู (ุงูุฒุฌุงุฌูุฉ ุงููุงุฎุฑุฉ) -->
<div id="studentAuthDrawer" class="auth-drawer-overlay" onclick="if(event.target == this) closeAuthDrawer()">
    <div class="auth-drawer-content modern-glass">
        <button onclick="closeAuthDrawer()" class="close-btn-modern"><i class="fa-solid fa-xmark"></i></button>
        <div class="header-content-center">
            <h2 id="authTitle" class="auth-main-title" data-i18n="welcome_back_title">ูุฑุญุจุงู ุจุนูุฏุชู</h2>
            <p id="authSubtitle" class="auth-sub-title" data-i18n="welcome_nursing_sub">ุงูุถู ุฅูู ูุฌุชูุน ุงูุชูุฑูุถ ุงูุฎุงุต ุจูุง
                ุจุงูุฃุณูู</p>
        </div>
        <div class="drawer-body">
            <!-- ุชุฃูุฏ ุฃู ูู input ุฏุงุฎู ุงูู drawer-body ูุชุจุน ูุฐุง ุงูุดูู ูุชุนูู ุงูุชุณููุฉ ุงูุนุงุฆูุฉ: -->
            <!-- <div class="floating-group">
                   <i class="fa-solid fa-user icon-inside"></i>
                   <input type="text" class="floating-input" placeholder=" ">
                   <label class="floating-label">Name</label>
                 </div> -->
        </div>
    </div>
</div>
<!-- [ูุงูุฐุฉ ูุชุญ ุจูุงุจุฉ ุงูุฏุฎูู - ุชุฃูุฏ ูู ูุฌูุฏ ูุฐุง ุงูููุฏ] -->
<div id="doorDurationModal" class="modal-overlay" style="z-index: 2147483647; display: none;">
    <div class="modal-box" style="max-width: 350px; border-radius: 30px;">
        <div
            style="background: #fff7ed; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px auto;">
            <i class="fa-solid fa-door-open" style="color: #ea580c; font-size: 25px;"></i>
        </div>
        <h3 style="font-weight: 900; color: #1e293b;" data-i18n="open_gate_title">ูุชุญ ุจุงุจ ุชุณุฌูู ุงูุญุถูุฑ</h3>
        <p style="font-size: 13px; color: #64748b;" data-i18n="door_hint">ุณูุชู ุชูููุฏ ููุฏ ุฌุฏูุฏ ุงูุขู. ุญุฏุฏ ูุฏุฉ ูุชุญ ุงูุจุงุจ
            ููุทูุงุจ:</p>

        <div class="sys-time-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 20px 0;">
            <button onclick="confirmOpenDoor(60)" class="sys-time-btn" data-i18n="time_1m">ุฏูููุฉ ูุงุญุฏุฉ</button>
            <button onclick="confirmOpenDoor(180)" class="sys-time-btn" data-i18n="time_3m">3 ุฏูุงุฆู</button>
            <button onclick="confirmOpenDoor(300)" class="sys-time-btn" data-i18n="time_5m">5 ุฏูุงุฆู</button>
            <button onclick="confirmOpenDoor(600)" class="sys-time-btn" data-i18n="time_10m">10 ุฏูุงุฆู</button>
            <button onclick="confirmOpenDoor(-1)" class="sys-time-btn sys-infinite" style="grid-column: span 2;"
                data-i18n="open_time">๐ ููุช ููุชูุญ</button>
        </div>

        <button onclick="document.getElementById('doorDurationModal').style.display='none'" class="btn-cancel-modern"
            style="width:100%;" data-i18n="cancel_btn">ุฅูุบุงุก</button>
    </div>
</div>
<!-- [ูุงูุฐุฉ ุฅุฏุงุฑุฉ ูุฌููุนุงุช ุงูุฌูุณุฉ - ุชุธูุฑ ููุฏูุชูุฑ] -->
<div id="manageGroupsModal" class="modal-overlay" style="z-index: 2147483647; display: none;">
    <div class="modal-box" style="max-width: 340px; border-radius: 30px;">
        <div class="modal-title" style="color: #6366f1;">
            <i class="fa-solid fa-users-gear"></i> <span data-i18n="manage_groups_title">ุฅุฏุงุฑุฉ ุงููุฌููุนุงุช</span>
        </div>
        <p style="font-size: 12px; margin-bottom: 15px;" data-i18n="manage_groups_hint">ููููู ุฅุถุงูุฉ ุฃูุซุฑ ูู ูุฌููุนุฉ ููุฐู
            ุงููุญุงุถุฑุฉ</p>

        <div style="display: flex; gap: 8px; margin-bottom: 15px;">
            <input type="text" id="newGroupInput" class="modern-input" data-i18n-placeholder="group_placeholder"
                placeholder="ูุซูุงู: G5" style="text-align: center; text-transform: uppercase;">
            <button onclick="addNewGroupToSession()" class="btn-main"
                style="width: 60px; margin: 0; border-radius: 12px;">+</button>
        </div>

        <div id="sessionGroupsList"
            style="display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; max-height: 150px; overflow-y: auto; padding: 10px; background: #f8fafc; border-radius: 15px;">
            <!-- ุงูุฌุฑูุจุงุช ุงููุถุงูุฉ ุณุชุธูุฑ ููุง ูู Badges -->
        </div>

        <button onclick="document.getElementById('manageGroupsModal').style.display='none'" class="btn-cancel-modern"
            style="margin-top: 15px;" data-i18n="save_close_btn">ุญูุธ ูุฅุบูุงู</button>
    </div>
</div>
<!-- [ูุงูุฐุฉ ุทูุจ ุงูุฃุฏูุงุช ูุงููุนุฏุงุช] -->
<!-- [ูุงูุฐุฉ ุทูุจ ุงูุฃุฏูุงุช ูุงููุนุฏุงุช - ุงููุณุฎุฉ ุงููุตุญุญุฉ] -->
<!-- [Tools Request Modal - Fixed Professional Version] -->
<div id="toolsRequestModal" class="modal-overlay" style="z-index: 2147483647; display: none;">
    <!-- Box Wrapper with LTR Direction -->
    <div class="modal-box"
        style="max-width: 420px; padding: 0; border-radius: 16px; overflow: hidden; background: white; direction: ltr; text-align: left; font-family: sans-serif;">

        <!-- Header: Title Left, Close Right -->
        <div
            style="background: linear-gradient(135deg, #16a34a, #15803d); padding: 18px 25px; color: white; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);">
            <h3 style="margin: 0; font-size: 16px; font-weight: 700; display: flex; align-items: center; gap: 8px;">
                <i class="fa-solid fa-briefcase-medical" style="margin-left: 8px;"></i> <span
                    data-i18n="tools_request_title">ุทูุจ ูุนุฏุงุช / ุฃุฏูุงุช</span>
            </h3>
            <button onclick="document.getElementById('toolsRequestModal').style.display='none'"
                style="background: rgba(255,255,255,0.2); border: none; color: white; width: 32px; height: 32px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s;">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>

        <!-- Body -->
        <div style="padding: 25px;">

            <!-- 1. Tool Name -->
            <div style="margin-bottom: 20px;">
                <label style="font-size: 13px; font-weight: 700; color: #374151; display:block; margin-bottom: 8px;"
                    data-i18n="required_tool_label">ุงูุฃุฏุงุฉ / ุงูุฌูุงุฒ ุงููุทููุจ</label>
                <input type="text" id="reqToolName" data-i18n-placeholder="tool_name_placeholder"
                    placeholder="ูุซุงู: ุฌูุงุฒ ุนุฑุถุ ุณูุงุนุงุช..."
                    style="width: 100%; padding: 12px 15px; border-radius: 10px; border: 1px solid #d1d5db; background: #f9fafb; color: #111827; font-weight: 500; font-size: 14px; outline: none; font-family: 'Cairo', sans-serif;">
            </div>

            <!-- 2. Row: Quantity & Urgency -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">

                <!-- Quantity Counter -->
                <div>
                    <label style="font-size: 13px; font-weight: 700; color: #374151; display:block; margin-bottom: 8px;"
                        data-i18n="quantity_label">ุงููููุฉ</label>
                    <div
                        style="display: flex; align-items: center; border: 1px solid #d1d5db; border-radius: 10px; overflow: hidden; background: #f9fafb;">
                        <button onclick="changeQty(-1)"
                            style="width: 40px; height: 42px; background: #e5e7eb; border: none; color: #374151; cursor: pointer; font-size: 16px; border-right: 1px solid #d1d5db;">-</button>
                        <input type="number" id="reqToolQty" value="1" min="1" readonly
                            style="flex: 1; height: 42px; text-align: center; border: none; background: transparent; color: #111827; font-weight: 700; font-size: 16px; width: 50px;">
                        <button onclick="changeQty(1)"
                            style="width: 40px; height: 42px; background: #e5e7eb; border: none; color: #16a34a; cursor: pointer; font-size: 16px; border-left: 1px solid #d1d5db;">+</button>
                    </div>
                </div>

                <!-- Urgency Segment -->
                <div>
                    <label style="font-size: 13px; font-weight: 700; color: #374151; display:block; margin-bottom: 8px;"
                        data-i18n="priority_label">ุงูุฃููููุฉ</label>
                    <div class="segment-control"
                        style="margin: 0; height: 44px; display: flex; background: #f3f4f6; padding: 3px; border-radius: 10px;">

                        <input type="radio" name="urgency" id="urg_normal" value="normal" checked style="display:none;">
                        <label for="urg_normal" onclick="document.getElementById('urg_normal').checked=true"
                            style="flex: 1; display: flex; align-items: center; justify-content: center; border-radius: 8px; font-size: 12px; font-weight: 600; color: #4b5563; cursor: pointer; transition: 0.2s;"
                            data-i18n="priority_normal">
                            ุนุงุฏู
                        </label>

                        <input type="radio" name="urgency" id="urg_high" value="urgent" style="display:none;">
                        <label for="urg_high" onclick="document.getElementById('urg_high').checked=true"
                            style="flex: 1; display: flex; align-items: center; justify-content: center; border-radius: 8px; font-size: 12px; font-weight: 600; color: #ef4444; cursor: pointer; transition: 0.2s;"
                            data-i18n="priority_high">
                            ุนุงุฌู ๐ฅ
                        </label>
                    </div>
                </div>
            </div>

            <!-- 3. Timing -->
            <div style="margin-bottom: 20px;">
                <label style="font-size: 13px; font-weight: 700; color: #374151; display:block; margin-bottom: 8px;"
                    data-i18n="needed_time_label">ุงูููุช ุงููุทููุจ</label>
                <div style="position: relative;">
                    <select id="reqTimingSelect" onchange="toggleTimeInput(this.value)"
                        style="width: 100%; padding: 12px 15px; border-radius: 10px; border: 1px solid #d1d5db; background: #f9fafb; color: #111827; font-size: 14px; font-family: 'Cairo', sans-serif; appearance: none; -webkit-appearance: none;">
                        <option value="now" data-i18n="time_now_option">ุงูุขู (ุงููุญุงุถุฑุฉ ุงูุญุงููุฉ)</option>
                        <option value="later" data-i18n="time_later_option">ุฌุฏููุฉ ูููุช ูุงุญู</option>
                    </select>
                    <i class="fa-solid fa-chevron-down"
                        style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #6b7280; pointer-events: none;"></i>
                </div>

                <div id="reqTimePicker" style="display: none; margin-top: 10px;">
                    <input type="time" id="reqSpecificTime"
                        style="width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #d1d5db; background: #fff; color: #111827;">
                </div>
            </div>

            <!-- 4. Location -->
            <div style="margin-bottom: 25px;">
                <label style="font-size: 13px; font-weight: 700; color: #374151; display:block; margin-bottom: 8px;"
                    data-i18n="location_label">ุงููููุน (ูุงุนุฉ / ูุนูู)</label>
                <div style="position: relative;">
                    <select id="reqLocationSelect"
                        style="width: 100%; padding: 12px 15px; border-radius: 10px; border: 1px solid #d1d5db; background: #f9fafb; color: #111827; font-size: 14px; font-weight: 600; font-family: 'Outfit', sans-serif; appearance: none; -webkit-appearance: none;">
                        <option value="" disabled selected data-i18n="select_location_default">-- ุงุฎุชุฑ ุงููููุน --
                        </option>
                    </select>
                    <i class="fa-solid fa-chevron-down"
                        style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #6b7280; pointer-events: none;"></i>
                </div>
            </div>

            <!-- Submit Button -->
            <button onclick="submitLogisticsRequest()" class="btn-main"
                style="background: #16a34a; box-shadow: 0 4px 12px rgba(22, 163, 74, 0.4); height: 50px; font-size: 16px; font-weight: 700; width: 100%; border: none; border-radius: 12px; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
                <span data-i18n="send_request_btn">ุฅุฑุณุงู ุงูุทูุจ</span> <i class="fa-solid fa-paper-plane"></i>
            </button>

        </div>
    </div>
</div>

<!-- ุฅุถุงูุฉ CSS ุตุบูุฑ ูุชูุนูู ุญุฑูุฉ ุฒุฑุงุฑ ุงูุฃูููุฉ -->
<style>
    /* Active states for the manual segment control */
    #urg_normal:checked+label {
        background: #ffffff;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        color: #1f2937 !important;
    }

    #urg_high:checked+label {
        background: #fee2e2;
        box-shadow: 0 1px 3px rgba(239, 68, 68, 0.2);
        color: #b91c1c !important;
    }
</style>
<!-- [MODAL: ุชูููู ุงููุญุงุถุฑุฉ] -->
<div id="feedbackModal" class="modal-overlay" style="z-index: 2147483647; display: none;">
    <div class="modal-box" style="text-align: center; max-width: 350px;">
        <div style="margin-bottom: 15px;">
            <div
                style="width: 70px; height: 70px; background: #fffbeb; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto; border: 4px solid #fff;">
                <i class="fa-solid fa-star" style="font-size: 35px; color: #f59e0b;"></i>
            </div>
        </div>

        <h3 style="color: #1e293b; margin-bottom: 5px; font-family: 'Cairo', sans-serif;">ุฑุฃูู ููููุง</h3>
        <p style="color: #64748b; font-size: 13px; margin-bottom: 20px;">
            ูุฑุฌู ุชูููู ูุญุงุถุฑุฉ ุงูููู ูููุชุงุจุนุฉ:<br>
            <b id="feedbackSubjectName" style="color: #0ea5e9; font-size: 15px;">--</b> <br>
            <span style="font-size: 12px; background: #f1f5f9; padding: 2px 8px; border-radius: 6px;">ุฏ. <span
                    id="feedbackDocName">--</span></span>
        </p>

        <!-- ุงููุฌูู ุงูุชูุงุนููุฉ -->
        <div class="star-rating-container" dir="ltr">
            <i class="fa-solid fa-star star-btn" data-value="1" onclick="selectStar(1)"></i>
            <i class="fa-solid fa-star star-btn" data-value="2" onclick="selectStar(2)"></i>
            <i class="fa-solid fa-star star-btn" data-value="3" onclick="selectStar(3)"></i>
            <i class="fa-solid fa-star star-btn" data-value="4" onclick="selectStar(4)"></i>
            <i class="fa-solid fa-star star-btn" data-value="5" onclick="selectStar(5)"></i>
        </div>
        <div id="ratingText"
            style="font-size: 12px; font-weight: bold; color: #f59e0b; height: 20px; margin-bottom: 15px;"></div>

        <!-- ุญููู ูุฎููุฉ ููุจูุงูุงุช -->
        <input type="hidden" id="selectedRating" value="0">
        <input type="hidden" id="targetAttendanceDocId" value="">

        <button onclick="submitFeedback()" class="btn-main"
            style="width: 100%; box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3); background: linear-gradient(135deg, #f59e0b, #d97706);">
            ุฅุฑุณุงู ุงูุชูููู <i class="fa-solid fa-paper-plane"></i>
        </button>
    </div>
</div>

<style>
    .star-rating-container {
        display: flex;
        justify-content: center;
        gap: 12px;
        margin-bottom: 10px;
    }

    .star-btn {
        font-size: 28px;
        color: #e2e8f0;
        cursor: pointer;
        transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275), color 0.2s;
    }

    .star-btn:active {
        transform: scale(0.8);
    }

    .star-btn.active {
        color: #f59e0b;
        transform: scale(1.1);
        text-shadow: 0 0 10px rgba(245, 158, 11, 0.4);
    }
</style>
<!-- [ูุงูุฐุฉ ุงูุจุฑููุงูู ุงูุงุฌุชูุงุนู ุงูุนุงู] -->
<!-- ๐ฅ ุงูุชุนุฏูู ููุง: ุฑูุนูุง z-index ูุฃูุตู ุฑูู ูููู ุนุดุงู ูุธูุฑ ููู ุงููุงูู -->
<div id="publicProfileModal" class="modal-overlay" style="z-index: 2147483647 !important;">
    <div class="modal-box social-profile-box">
        <button onclick="document.getElementById('publicProfileModal').style.display='none'" class="btn-close-absolute">
            <i class="fa-solid fa-xmark"></i>
        </button>

        <!-- ุตูุฑุฉ ุงูุดุฎุต -->
        <div class="social-avatar-wrapper" onclick="expandAvatar()">
            <div id="publicAvatar" class="social-avatar-img"></div>
            <div class="zoom-hint"><i class="fa-solid fa-magnifying-glass-plus"></i></div>
        </div>

        <!-- ุงูุจูุงูุงุช -->
        <h2 id="publicName" class="social-name">--</h2>
        <div id="publicRoleBadge" class="social-role-badge">--</div>

        <!-- ุงูุญุงูุฉ -->
        <div class="social-status-box">
            <i class="fa-solid fa-quote-right quote-icon"></i>
            <p id="publicStatusText">...</p>
            <i class="fa-solid fa-quote-left quote-icon"></i>
        </div>

        <!-- ุงูุชูุงุตูู -->
        <div class="social-info-grid">
            <div class="s-info-item">
                <span class="lbl">ุงููุณู/ุงููุฑูุฉ</span>
                <span class="val" id="publicLevel">--</span>
            </div>
            <div class="s-info-item">
                <span class="lbl">ุงูููุฏ</span>
                <span class="val en-font" id="publicCode">--</span>
            </div>
        </div>
    </div>
</div>

<!-- [ูุงูุฐุฉ ุชูุจูุฑ ุงูุตูุฑุฉ] -->
<!-- ๐ฅ ุงูุชุนุฏูู ููุง ุฃูุถุงู -->
<div id="imageZoomModal" class="modal-overlay" style="z-index: 2147483647 !important; background: rgba(0,0,0,0.95);"
    onclick="this.style.display='none'">
    <div id="zoomedAvatarContainer" class="zoomed-img-box">
        <!-- ุงูุตูุฑุฉ ุงููุจูุฑุฉ -->
    </div>
</div>

</div>
<script type="module" src="notifications.js"></script>

<style>
    /* 1. ุงูุญุงููุฉ ุงููุญุฑุฑุฉ (ุชุทูู ููู ุงููุงุฑุช) */
    .halo-container-v2 {
        position: absolute !important;
        top: -150px !important;
        /* ๐ ุงูุชุญูู ูู ุงุฑุชูุงุน ุงููุฌููุนุฉ ูููุง ูู ููุง */
        left: 50% !important;
        transform: translateX(-50%) !important;
        width: 250px !important;
        /* ุนุฑุถ ุงูููุทูุฉ ุงููู ูููุง ุงูุฃุฒุฑุงุฑ */
        height: 100px !important;
        z-index: 50 !important;
        pointer-events: none !important;
        /* ุชุณูุญ ุจุงูุถุบุท ูู ุงููุฑุงุบุงุช */
        /* border: 1px solid red;  <-- ุดูู ุฏู ุนุดุงู ุชุดูู ุงูุญุฏูุฏ ูู ุญุจูุช ุชุธุจุท */
    }

    /* 2. ุงูุณุชุงูู ุงูุนุงู ููุฃุฒุฑุงุฑ ุงูุฌุฏูุฏุฉ */
    .halo-item {
        position: absolute !important;
        width: 45px !important;
        height: 45px !important;
        border-radius: 50% !important;
        background: #ffffff !important;
        border: 1px solid #e2e8f0 !important;
        box-shadow: 0 5px 15px rgba(14, 165, 233, 0.2) !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        cursor: pointer !important;
        pointer-events: auto !important;
        /* ุชูุนูู ุงูุถุบุท */
        font-size: 18px !important;
        transition: 0.2s !important;
    }

    .halo-item:active {
        transform: scale(0.9);
    }

    /* 3. ุชูุฒูุน ุงูุฃูุงูู (ุงูุชุดูููุฉ) */

    /* ุงููุบุฉ (ูู ุงูููุฉ) */
    /* ุฒุฑ ุงููุบุฉ (ูู ุงูููุฉ - ููู ุงูููุฌู ูุจุงุดุฑุฉ) */
    .halo-center {
        top: -76px !important;
        /* ๐ฅ ุงูุฑูู ุฏู ูู ุงููู ุจูุญุฏุฏ ุงูุงุฑุชูุงุนุ ูู ูุง ุชุฒูุฏ ุงูุณุงูุจ ูุทูุน ูููู */
        left: -5% !important;
        transform: translateX(-50%) !important;
        z-index: 100 !important;
        /* ุนุดุงู ูุธูุฑ ููู ุตูุฑุฉ ุงูููุฌู */

        /* ุชูุณููุงุช ุงูุฌูุงููุฉ */
        background: #ffffff !important;
        color: #0f172a !important;
        font-weight: 900 !important;
        font-size: 12px !important;
        border-color: #0ea5e9 !important;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1) !important;
    }

    /* ุงูุฑุณุงุฆู (ุดูุงู ุชุญุช) */
    .halo-left {
        top: 35px !important;
        left: 20px !important;
        color: #0ea5e9 !important;
    }

    /* ุงูุฅุดุนุงุฑุงุช (ูููู ุชุญุช) */
    .halo-right {
        top: 35px !important;
        right: 20px !important;
        color: #f59e0b !important;
    }

    /* ุงูููุทุฉ ุงูุญูุฑุงุก ุงูุฌุฏูุฏุฉ */
    .halo-badge-v2 {
        position: absolute;
        top: -3px;
        right: -3px;
        background: #ef4444;
        color: white;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        font-size: 10px;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid white;
    }
</style>
<!-- ููุฏุงู ุฎูุงุฑุงุช ุฅููุงุก ุงูุฌูุณุฉ ุงููุทูุฑ -->
<div id="sessionActionModal" class="modal-overlay">
    <div class="modal-box" style="max-width: 400px; text-align: center;">
        <div style="margin-bottom: 20px;">
            <div class="icon-box-large" style="background: #f0f9ff; color: #0ea5e9; margin: 0 auto 15px;">
                <i class="fa-solid fa-pause-circle" style="font-size: 30px;"></i>
            </div>
            <h3 style="color: #0f172a; margin: 0;">ูุฑุงุฑุงุช ุงูุฌูุณุฉ</h3>
            <p style="color: #64748b; font-size: 13px; margin-top: 5px;">ูู ุงูุชูุช ุงููุญุงุถุฑุฉ ุชูุงูุงู ุฃู ุชุฑูุฏ ุฃุฎุฐ ุงุณุชุฑุงุญุฉุ
            </p>
        </div>

        <!-- ุฎูุงุฑ ุงูุงุณุชุฑุงุญุฉ (ุชุฌููุฏ ุงูุทูุงุจ) -->
        <button onclick="performSessionPause()" class="btn-main"
            style="background: linear-gradient(135deg, #f59e0b, #d97706); margin-bottom: 10px;">
            <i class="fa-solid fa-mug-hot"></i> ุงุณุชุฑุงุญุฉ ูุงุณุชุฆูุงู (Break)
        </button>

        <!-- ุฎูุงุฑ ุงูุฅููุงุก ุงูููุงุฆู -->
        <button onclick="closeSessionImmediately()" class="btn-main" style="background: #ef4444; margin-bottom: 10px;">
            <i class="fa-solid fa-floppy-disk"></i> ุฅููุงุก ูุญูุธ ููุงุฆู
        </button>

        <button onclick="document.getElementById('sessionActionModal').style.display='none'" class="btn-sheet-cancel">
            ุชุฑุงุฌุน <i class="fa-solid fa-xmark"></i>
        </button>
    </div>
</div>
<!-- ูุงูุฐุฉ ุงูุงุณุชุฑุงุญุฉ (Break Mode) -->
<div id="breakModal" class="modal-overlay" style="z-index: 999999999; display: none;">
    <div class="modal-box" style="text-align: center; padding: 30px 20px; border-bottom: 5px solid #f59e0b;">

        <div
            style="background: #fffbeb; width: 90px; height: 90px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px auto; border: 4px solid #fff; box-shadow: 0 4px 6px -1px rgba(245, 158, 11, 0.2);">
            <i class="fa-solid fa-mug-hot" style="font-size: 40px; color: #f59e0b;"></i>
        </div>

        <h2 style="margin: 0; color: #1e293b; font-size: 22px; font-weight: 900; font-family: 'Cairo', sans-serif;">
            ุงุณุชุฑุงุญุฉ ูุญุงุฑุจ โ
        </h2>

        <p style="color: #64748b; font-size: 14px; margin: 10px 0 25px 0; line-height: 1.6;">
            ุชู ุฅููุงู ุงููุญุงุถุฑุฉ ูุคูุชุงู ูู ูุจู ุงูุฏูุชูุฑ.<br>
            ูุฑุฌู ุงูุงูุชุธุงุฑ ุญุชู ูุชู ุงุณุชุฆูุงู ุงูุฌูุณุฉุ ุซู <b>ุฃุนุฏ ุงูุฏุฎูู</b>.
        </p>

        <button onclick="location.reload()" class="btn-main"
            style="width: 100%; background: #f59e0b; color: white; box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);">
            ุญุณูุงูุ ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ
        </button>
    </div>
</div>
</body>

</html>